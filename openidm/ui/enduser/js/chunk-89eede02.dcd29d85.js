/*!
 * Copyright 2019-2020 ForgeRock AS. All Rights Reserved 
 *  Use of this code requires a commercial software license with ForgeRock AS. or with one of its affiliates. All use shall be exclusively subject to such license between the licensee and ForgeRock AS.
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-89eede02"],{"13c0":function(e,t,a){},2785:function(e,t,a){"use strict";var s=a("13c0"),r=a.n(s);r.a},"4dc1":function(e,t,a){},a368:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("b-row",[a("b-col",[a("div",{staticClass:"d-sm-flex my-4"},[a("div",{staticClass:"media"},[a("div",{staticClass:"rounded-circle fr-resource-circle text-light bg-primary mr-4"},[a("i",{class:e.setIcon})]),a("div",{staticClass:"media-body"},[a("h1",[e._v(e._s(e.displayName))]),a("h6",{staticClass:"text-muted"},[e._v(e._s(e.secondaryTitle))])])]),e.canChangePassword||e.canDelete?a("div",{staticClass:"ml-auto my-4 my-sm-0 align-self-center align-self-end"},[a("b-dropdown",{staticClass:"m-md-2",attrs:{id:"resourceActions",text:"Actions",right:"",variant:"primary"}},[e.canChangePassword?a("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.resetModal",modifiers:{resetModal:!0}}]},[e._v(e._s(e.$t("pages.access.resetPassword")))]):e._e(),e.canDelete?a("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.deleteModal",modifiers:{deleteModal:!0}}]},[e._v(e._s(e.$t("common.form.delete"))+" "+e._s(this.name))]):e._e()],1)],1):e._e()])])],1),a("b-tabs",{attrs:{"content-class":"mt-4","nav-class":"nav-bar-border","flex-column":"","flex-sm-row":""}},[a("b-tab",{attrs:{title:this.$t("pages.access.details"),active:""}},[e.displayProperties.length>0?a("fr-object-type-editor",{attrs:{"form-fields":e.formFields,"display-properties":e.displayProperties,"disable-save-button":e.disableSaveButton,"resource-path":e.resource+"/"+e.name+"/"+e.id}}):a("span",[e._v(" "+e._s(e.$t("pages.access.noAvailableProperties"))+" ")])],1),e._l(e.objectTypeProperties,(function(t){return a("b-tab",{key:t.propName+"_tab",attrs:{title:t.title}},[a("fr-object-type-editor",{attrs:{"form-fields":e.formFields[t.propName]||{},"sub-property-name":t.propName,"display-properties":e.getObjectTypeProperyDisplayProperties(t),"disable-save-button":t.readOnly,"resource-path":e.resource+"/"+e.name+"/"+e.id}})],1)})),e._l(e.relationshipProperties,(function(t){return["array"===t.type?a("b-tab",{key:t.propName+"_tab",attrs:{title:t.title}},[a("fr-relationship-array",{attrs:{parentResource:e.resource+"/"+e.name,parentId:e.id,relationshipArrayProperty:t}})],1):e._e()]}))],2),e.canDelete?a("b-modal",{ref:"deleteModal",attrs:{id:"deleteModal",title:this.$t("pages.access.deleteModalTitle")}},[a("div",[e._v(" "+e._s(e.$t("pages.access.deleteConfirm"))+" "+e._s(this.name)+"? ")]),a("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("div",{staticClass:"float-right"},[a("b-btn",{attrs:{type:"button",variant:"danger"},on:{click:e.deleteResource}},[e._v(e._s(e.$t("common.form.delete")))])],1)])]):e._e(),e.canChangePassword?a("b-modal",{ref:"resetModal",attrs:{id:"resetModal",title:this.$t("pages.access.resetPassword")}},[a("fr-password-policy-input",{attrs:{policyApi:e.resource+"/"+e.name+"/policyTest"},model:{value:e.formFields["password"],callback:function(t){e.$set(e.formFields,"password",t)},expression:"formFields['password']"}},[a("b-form-group",{staticClass:"mb-3",attrs:{slot:"custom-input"},slot:"custom-input"},[a("label",{attrs:{for:"updatePassword"}},[e._v(e._s(e.$t("pages.access.password")))]),a("div",{staticClass:"form-label-password form-label-group mb-0"},[a("b-form-input",{attrs:{id:"updatePassword",autocomplete:"password",type:e.passwordInputType,name:"password"},model:{value:e.formFields["password"],callback:function(t){e.$set(e.formFields,"password",t)},expression:"formFields['password']"}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.revealNew}},[a("i",{class:[{"fa-eye-slash":!e.showPassword},{"fa-eye":e.showPassword},"fa"]})])])],1)])],1),a("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("div",{staticClass:"float-right"},[a("b-btn",{attrs:{type:"button",variant:"primary"},on:{click:e.savePassword}},[e._v(e._s(e.$t("common.form.save")))])],1)])],1):e._e()],1)},r=[],i=a("2ef0"),o=a.n(i),l=a("bc3a"),n=a.n(l),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-card",[a("ValidationObserver",{ref:"observer",attrs:{slim:""}},[e._l(e.displayProperties,(function(t,s){return[t.isReadOnly||e.disableSaveButton?["string"!==t.type&&"number"!==t.type||void 0!==t.encryption?e._e():a("b-form-group",{key:"readResource"+s,attrs:{label:t.title,"label-for":"field.key",horizontal:""}},[a("b-form-input",{attrs:{horizontal:"",type:"text",plaintext:""},model:{value:e.formFields[t.key],callback:function(a){e.$set(e.formFields,t.key,a)},expression:"formFields[field.key]"}})],1),"boolean"===t.type?a("b-form-group",{key:"readResource"+s},[a("div",{staticClass:"form-row"},[a("label",{staticClass:"col-form-label col-sm-3",attrs:{for:t.title}},[e._v(e._s(t.title))]),a("div",{staticClass:"mr-auto"},[a("toggle-button",{staticClass:"mt-2 p-0 fr-toggle-primary",attrs:{height:28,width:56,disabled:!0,sync:!0,cssColors:!0,labels:{checked:e.$t("common.form.yes"),unchecked:e.$t("common.form.no")}},model:{value:e.formFields[t.key],callback:function(a){e.$set(e.formFields,t.key,a)},expression:"formFields[field.key]"}})],1)])]):e._e(),"relationship"===t.type?a("b-form-group",{key:"readResource"+s},[a("div",{staticClass:"form-row"},[a("label",{staticClass:"col-form-label col-sm-3",attrs:{for:t.title}},[e._v(e._s(t.title))]),e.formFields[t.key]?a("div",{staticClass:"media-body"},[a("div",{staticClass:"text-bold pl-1"},[e._v(e._s(e.formFields[t.key][e.getRelationshipDisplayFields(t,e.formFields[t.key])[0]]))]),a("div",e._l(e.getRelationshipDisplayFields(t,e.formFields[t.key]),(function(s,r){return a("span",{directives:[{name:"show",rawName:"v-show",value:0!==r,expression:"displayFieldIndex !== 0"}],key:"displayField_"+s+"_"+r,staticClass:"pl-1 pr-1 text-muted"},[e._v(" "+e._s(e.formFields[t.key][s])+" ")])})),0)]):e._e()])]):e._e()]:["string"===t.type||"number"===t.type||"boolean"===t.type||"relationship"===t.type?a("ValidationProvider",{key:"editResource"+t.key,attrs:{name:t.title,vid:t.key,rules:t.required?"required":""},scopedSlots:e._u([{key:"default",fn:function(r){return["string"!==t.type&&"number"!==t.type||void 0!==t.encryption?"relationship"===t.type?a("fr-relationship-edit",{key:"editResource"+s,attrs:{relationshipProperty:t,index:s,value:e.formFields[t.key],setValue:e.setSingletonRelationshipValue}}):e._e():a("b-form-group",{attrs:{label:t.title,"label-for":"field.key",horizontal:""}},["string"===t.type?a("b-form-input",{ref:0===s?"focusInput":"",refInFor:!0,attrs:{name:t.key,type:"text",state:e.getValidationState(r),autocomplete:t.key},model:{value:e.formFields[t.key],callback:function(a){e.$set(e.formFields,t.key,"string"===typeof a?a.trim():a)},expression:"formFields[field.key]"}}):a("b-form-input",{ref:0===s?"focusInput":"",refInFor:!0,attrs:{horizontal:"",name:t.key,type:"number",state:e.getValidationState(r),autocomplete:t.key},model:{value:e.formFields[t.key],callback:function(a){e.$set(e.formFields,t.key,e._n(a))},expression:"formFields[field.key]"}}),a("b-form-invalid-feedback",[e._v(e._s(r.errors[0]))])],1),"boolean"===t.type?a("b-form-group",{key:"editResource"+s},[a("div",{staticClass:"form-row"},[a("label",{staticClass:"col-form-label col-sm-3",attrs:{for:t.title}},[e._v(e._s(t.title))]),a("div",{staticClass:"mr-auto"},[a("toggle-button",{staticClass:"mt-2 p-0 fr-toggle-primary",attrs:{height:28,width:56,sync:!0,cssColors:!0,labels:{checked:e.$t("common.form.yes"),unchecked:e.$t("common.form.no")}},model:{value:e.formFields[t.key],callback:function(a){e.$set(e.formFields,t.key,a)},expression:"formFields[field.key]"}})],1)])]):e._e()]}}],null,!0)}):e._e()]]}))],2),e.disableSaveButton?e._e():a("div",{staticClass:"float-right mt-4"},[a("b-btn",{attrs:{type:"button",variant:"primary"},on:{click:e.saveResource}},[e._v(e._s(e.$t("common.form.save")))])],1)],1)},d=[],p=a("f13c"),u=a("eea2"),m={name:"ObjectTypeEditor",components:{"fr-relationship-edit":p["a"]},props:{displayProperties:{type:Array,default:function(){return[]}},formFields:{type:Object,default:function(){}},resourcePath:{type:String,default:""},disableSaveButton:{type:Boolean,default:!1},isOpenidmAdmin:{type:Boolean,default:!1},subPropertyName:{type:String,default:null,required:!1}},mixins:[u["a"]],data:function(){return{oldFormFields:{}}},methods:{getRelationshipDisplayFields:function(e,t){return o.a.find(e.resourceCollection,{path:t._refResourceCollection}).query.fields},setSingletonRelationshipValue:function(e,t){this.formFields[e]=t},saveResource:function(){var e=this;this.$refs.observer.reset();var t=this.getRequestService();this.$refs.observer.validate().then((function(a){if(a){var s;if(e.subPropertyName){var r={},i={};r[e.subPropertyName]=o.a.clone(e.oldFormFields),i[e.subPropertyName]=o.a.clone(e.formFields),s=e.generateUpdatePatch(r,i)}else s=e.generateUpdatePatch(o.a.clone(e.oldFormFields),o.a.clone(e.formFields));t.patch(e.resourcePath,s).then((function(){e.oldFormFields=o.a.clone(e.formFields),e.displayNotification("success",e.$t("pages.access.successEdited",{resource:o.a.capitalize(e.name)}))}),(function(t){var a=e.findPolicyError(t.response,e.displayProperties);e.$refs.observer.reset(),a.length>0&&a.forEach((function(t){if(t.exists){var a={};a[t.field]=[t.msg],e.$refs.observer.setErrors(a)}})),e.displayNotification("error",e.$t("pages.access.invalidEdit"))}))}else e.displayNotification("error",e.$t("pages.access.invalidEdit"))}))}},mounted:function(){this.displayProperties.forEach((function(e){var t=e.title&&e.title.length>0,a=e.description&&e.description.length>0;!t&&a&&(e.title=e.description)})),this.oldFormFields=o.a.clone(this.formFields)}},f=m,h=a("2877"),y=Object(h["a"])(f,c,d,!1,null,null,null),v=y.exports,b=a("f8f2"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card mt-3"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.relationshipArrayProperty.isReadOnly,expression:"!relationshipArrayProperty.isReadOnly"}],staticClass:"px-4 py-2"},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"7"}},[a("b-btn",{staticClass:"mr-1",attrs:{type:"button",variant:"primary",id:"add_"+e.relationshipArrayProperty.key},on:{click:e.openCreateModal}},[a("i",{staticClass:"fa fa-plus mr-3"}),e._v(e._s(e.$t("common.form.new"))+" "+e._s(e.relationshipArrayProperty.title)+" ")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:e.selected.length>0,expression:"selected.length > 0"}],attrs:{variant:"outline-primary",id:"delete_"+e.relationshipArrayProperty.key},on:{click:function(t){return e.$bvModal.show(e.removeModalId)}}},[a("i",{staticClass:"fa fa-trash mr-3"}),e._v(e._s(e.$t("common.form.remove"))+" ")])],1)],1)],1),a("b-table",{ref:"relationshipArrayGrid",staticClass:"mb-0",attrs:{"show-empty":"","table-responsive":"",stacked:"lg",fields:e.columns,items:e.gridData,"per-page":0,hover:e.tableHover,"no-local-sorting":!0,selectable:!e.relationshipArrayProperty.isReadOnly,"selected-variant":"active"},on:{"row-selected":e.onRowSelected},scopedSlots:e._u([{key:"cell(selected)",fn:function(t){return[a("b-form-checkbox",{staticClass:"pl-4",attrs:{id:"rowSelectCheckbox_"+e.relationshipArrayProperty.key+t.index,disabled:""},model:{value:t.rowSelected,callback:function(a){e.$set(t,"rowSelected",a)},expression:"data.rowSelected"}})]}},{key:"cell(_relationshipDetails)",fn:function(t){return[a("div",{staticClass:"media cursor-pointer",on:{click:function(a){return e.resourceClicked(t.item)}}},[a("div",{staticClass:"media-body"},[a("div",{staticClass:"text-bold"},[e._v(e._s(t.value[0]))]),a("div",e._l(t.value,(function(t,s){return a("span",{directives:[{name:"show",rawName:"v-show",value:0!==s,expression:"index !== 0"}],key:"displayField_"+t+"_"+s,staticClass:"pr-1 text-muted"},[e._v(" "+e._s(t)+" ")])})),0)])])]}}])},[a("template",{slot:"HEAD_selected"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.gridData.length>0,expression:"gridData.length > 0"}],staticClass:"cursor-pointer",on:{click:e.toggleSelectAll}},[a("b-form-checkbox",{staticClass:"pl-4",attrs:{disabled:""},model:{value:e.allRowsSelected,callback:function(t){e.allRowsSelected=t},expression:"allRowsSelected"}})],1)])],2),a("div",{directives:[{name:"show",rawName:"v-show",value:e.gridData.length,expression:"gridData.length"}],staticClass:"card-footer py-2"},[a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination justify-content-center mb-0"},[a("li",{class:[{disabled:1===e.currentPage},"page-item"],on:{click:function(t){t.preventDefault(),1!==e.currentPage&&e.paginationChange(1)}}},[e._m(0)]),a("li",{class:[{disabled:1===e.currentPage},"page-item"],on:{click:function(t){t.preventDefault(),1!==e.currentPage&&e.paginationChange(e.currentPage-1)}}},[e._m(1)]),a("li",{class:[{disabled:e.lastPage},"page-item"],on:{click:function(t){t.preventDefault(),!e.lastPage&&e.paginationChange(e.currentPage+1)}}},[e._m(2)])])])]),a("b-modal",{ref:e.createModalId,attrs:{id:e.createModalId,title:"Add "+e.relationshipArrayProperty.title}},[a("fr-relationship-edit",{attrs:{relationshipProperty:e.relationshipArrayProperty,index:0,setValue:e.addNewRelationship}}),a("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("div",{staticClass:"float-right"},[a("b-btn",{attrs:{variant:"outline-secondary mr-2"},on:{click:function(t){return e.$bvModal.hide(e.createModalId)}}},[e._v(" "+e._s(e.$t("common.form.cancel"))+" ")]),a("b-btn",{attrs:{type:"button",variant:"primary",id:"save_new_"+e.relationshipArrayProperty.key,disabled:0===e.newRelationships.length},on:{click:e.saveNewRelationships}},[e._v(" "+e._s(e.$t("common.form.save"))+" ")])],1)])],1),a("b-modal",{ref:e.removeModalId,attrs:{id:e.removeModalId,title:e.$t("pages.access.removeModalTitle")}},[a("div",[e._v(" "+e._s(e.$t("pages.access.removeConfirm"))+" "+e._s(e.relationshipArrayProperty.title)+"? ")]),a("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("div",{staticClass:"float-right"},[a("b-btn",{attrs:{variant:"btn-link text-danger mr-2"},on:{click:function(t){return e.$bvModal.hide(e.removeModalId)}}},[e._v(e._s(e.$t("common.form.cancel")))]),a("b-btn",{attrs:{type:"button",variant:"danger"},on:{click:e.removeRelationships}},[e._v(e._s(e.$t("common.form.remove")))])],1)])])],1)},w=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"page-link",attrs:{href:"#"}},[a("i",{staticClass:"fa fa-angle-double-left"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"page-link",attrs:{href:"#"}},[a("i",{staticClass:"fa fa-angle-left"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"page-link",attrs:{href:"#"}},[a("i",{staticClass:"fa fa-angle-right"})])}],_=a("761a"),P=a.n(_),k={name:"RelationshipArray",components:{"fr-relationship-edit":p["a"]},props:{parentId:{type:String,required:!0},relationshipArrayProperty:{type:Object,required:!0},parentResource:{type:String,required:!0}},data:function(){return{gridPageSize:10,allRowsSelected:!1,tableHover:!0,gridData:[],columns:[],currentPage:1,lastPage:!1,createModalId:"create_".concat(this.relationshipArrayProperty.propName,"_modal"),removeModalId:"delete_".concat(this.relationshipArrayProperty.propName,"_modal"),newRelationships:[],selected:[]}},mounted:function(){this.loadGrid(1)},methods:{loadGrid:function(e){var t=this,a=this.getRequestService();a.get(this.buildGridUrl(e)).then((function(e){e.data.pagedResultsCookie?t.lastPage=!1:t.lastPage=!0,t.relationshipArrayProperty.isReadOnly||t.columns.push({key:"selected",label:"",class:"checkbox-column"}),t.columns.push({key:"_relationshipDetails",label:P.a.singular(t.relationshipArrayProperty.title)}),t.gridData=[],t.setGridData(e.data.result,t.relationshipArrayProperty)})).catch((function(e){t.displayNotification("error",e.response.data.message)}))},setGridData:function(e,t){var a=this;e.forEach((function(e){var s=Object(i["find"])(t.items.resourceCollection,{path:e._refResourceCollection});e._relationshipDetails=Object(i["toArray"])(Object(i["pick"])(e,s.query.fields)),a.gridData.push(e)}))},buildGridUrl:function(e){var t="".concat(this.parentResource,"/").concat(this.parentId,"/").concat(this.relationshipArrayProperty.propName,"?_queryFilter=true&_pageSize=").concat(this.gridPageSize,"&_fields=");if(e>1){var a=(e-1)*this.gridPageSize;t="".concat(t,"&_pagedResultsOffset=").concat(a)}return t},paginationChange:function(e){this.currentPage=e,this.loadGrid(e)},resourceClicked:function(e){this.$router.push({name:"EditResource",params:{resourceType:e._refResourceCollection.split("/")[0],resourceName:e._refResourceCollection.split("/")[1],resourceId:e._refResourceId}})},openCreateModal:function(){this.$bvModal.show(this.createModalId),this.newRelationships=[]},addNewRelationship:function(e,t){t&&this.newRelationships.push(t)},onRowSelected:function(e){this.selected=e,this.allRowsSelected=e.length===this.gridPageSize},toggleSelectAll:function(){var e=this.$refs.relationshipArrayGrid;this.allRowsSelected=!this.allRowsSelected,this.allRowsSelected?e.selectedRows=Object(i["times"])(this.gridPageSize,(function(){return!0})):e.selectedRows=[]},saveNewRelationships:function(){this.updateRelationship("add",this.newRelationships)},removeRelationships:function(){var e=[],t=["_ref","_refResourceCollection","_refResourceId","_refProperties"];this.selected.forEach((function(a){a&&e.push(Object(i["pick"])(a,t))})),this.updateRelationship("remove",e)},updateRelationship:function(e,t){var a=this,s=Object(i["map"])(t,(function(t){return"remove"===e?{operation:"remove",field:"/"+a.relationshipArrayProperty.propName,value:t}:{operation:"add",field:"/"+a.relationshipArrayProperty.propName+"/-",value:t}})),r="remove"===e?"pages.access.successRemoved":"pages.access.successAdded",o=this.getRequestService(),l=function(){var t="remove"===e?a.removeModalId:a.createModalId;a.loadGrid(1),a.$bvModal.hide(t)};o.patch("".concat(this.parentResource,"/").concat(this.parentId),s).then((function(){l(),a.displayNotification("success",a.$t(r,{resource:a.relationshipArrayProperty.title}))})).catch((function(e){l(),a.displayNotification("error",e.response.data.message)}))}}},F=k,C=(a("2785"),Object(h["a"])(F,g,w,!1,null,"0b75945f",null)),R=C.exports,$={name:"Edit-Resource",components:{"fr-object-type-editor":v,"fr-password-policy-input":b["a"],"fr-relationship-array":R},mixins:[u["a"]],data:function(){return{name:this.$route.params.resourceName,resource:this.$route.params.resourceType,id:this.$route.params.resourceId,displayProperties:[],canDelete:!1,canChangePassword:!1,passwordInputType:"password",showPassword:!0,disableSaveButton:!1,icon:"",displayNameField:"",displaySecondaryTitleField:"",formFields:{},oldFormFields:{},objectTypeProperties:{},relationshipProperties:{}}},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this,t=this.getRequestService();n.a.all([this.getSchema("".concat(this.resource,"/").concat(this.name)),t.get("privilege/".concat(this.resource,"/").concat(this.name,"/").concat(this.id))]).then(n.a.spread((function(a,s){var r="";e.objectTypeProperties=e.getObjectTypeProperties(a.data,s.data),e.relationshipProperties=e.getRelationshipProperties(a.data,s.data),r=e.buildResourceUrl(),t.get(r).then((function(t){e.generateDisplay(a.data,s.data,t.data)})).catch((function(t){e.displayNotification("error",t.response.data.message)}))}))).catch((function(t){e.displayNotification("error",t.response.data.message)}))},buildResourceUrl:function(){var e="".concat(this.resource,"/").concat(this.name,"/").concat(this.id,"?_fields=*"),t=o.a.filter(this.relationshipProperties,{type:"relationship"});return t.length&&(e+=",".concat(o.a.map(t,(function(e){return e.propName+"/*"})).join(","))),e},getObjectTypeProperties:function(e,t){return o.a.pickBy(e.properties,(function(e,a){var s=t.VIEW.properties.includes(a)||t.UPDATE.properties.includes(a),r="object"===e.type&&e.viewable;return e.propName=a,e.readOnly=!t.UPDATE.properties.includes(a),r&&s}))},getObjectTypeProperyDisplayProperties:function(e){var t=this;return o.a.map(e.order,(function(a){var s=e.properties[a];return s.key=a,s.value=t.formFields[e.propName]&&t.formFields[e.propName][a]||null,e.readOnly&&!t.isOpenidmAdmin?s.disabled=!0:s.disabled=!1,e.properties[a]}))},getRelationshipProperties:function(e,t){return o.a.pickBy(e.properties,(function(e,a){var s=t.VIEW.properties.indexOf(a)>-1||t.UPDATE.properties.indexOf(a)>-1,r="relationship"===e.type||"array"===e.type&&"relationship"===e.items.type;return e.propName=a,r&&(e.isReadOnly=-1===t.UPDATE.properties.indexOf(a)),r&&s}))},generateDisplay:function(e,t,a){var s=this;this.oldFormFields=o.a.pick(a,t.VIEW.properties),t.DELETE.allowed&&(this.canDelete=!0),e.icon?this.icon=e.icon:this.icon="",o.a.each(this.oldFormFields,(function(e,t){s.$set(s.formFields,t,e)})),t.VIEW.allowed&&(0===t.UPDATE.properties.length&&(this.disableSaveButton=!0),o.a.each(this.mergePrivilegeProperties(t,e),(function(t){var a=e.properties[t.attribute];-1!==o.a.indexOf(e.required,t.attribute)&&(a.required=!0),"password"!==t.attribute||t.readOnly||(s.canChangePassword=!0),a.key=t.attribute,"_id"!==t.attrubute&&0===s.displayNameField.length&&(s.displayNameField=t.attribute),"title"!==o.a.toLower(t.attribute)&&"email"!==o.a.toLower(t.attribute)&&"type"!==o.a.toLower(t.attribute)&&"mail"!==o.a.toLower(t.attribute)||0!==s.displaySecondaryTitleField.length||(s.displaySecondaryTitleField=t.attribute),o.a.isUndefined(s.formFields[t.attribute])&&("boolean"===a.type?(s.$set(s.formFields,t.attribute,!1),s.oldFormFields[t.attribute]=!1):(s.$set(s.formFields,t.attribute,""),s.oldFormFields[t.attribute]="")),t.readOnly&&(a.isReadOnly=!0),s.displayProperties.push(a)})))},deleteResource:function(){var e=this,t=this.getRequestService();this.$refs.deleteModal.hide(),t.delete("".concat(this.resource,"/").concat(this.name,"/").concat(this.id)).then((function(){e.displayNotification("success",e.$t("pages.access.deleteResource")),e.$router.push({name:"ListResource",params:{resourceType:e.resource,resourceName:e.name}})})).catch((function(t){e.displayNotification("error",t.response.data.message)}))},revealNew:function(){"password"===this.passwordInputType?(this.passwordInputType="text",this.showPassword=!1):(this.passwordInputType="password",this.showPassword=!0)},savePassword:function(){var e=this,t=this.getRequestService(),a=[{operation:"add",field:"/password",value:this.formFields["password"]}];this.$refs.resetModal.hide(),this.formFields["password"]="",t.patch("".concat(this.resource,"/").concat(this.name,"/").concat(this.id),a).then((function(){e.displayNotification("success",e.$t("pages.access.successSavePassword"))}),(function(){e.displayNotification("error",e.$t("pages.access.failedSavePassword"))}))},mergePrivilegeProperties:function(e,t){var a=[];return o.a.each(t.order,(function(t){var s=o.a.indexOf(e.VIEW.properties,t)>-1,r=o.a.indexOf(e.UPDATE.properties,t)>-1,i={attribute:t};r?a.push(i):s&&(i.readOnly=!0,a.push(i))})),a}},computed:{secondaryTitle:function(){var e="".concat(this.resource," - ").concat(this.name);return this.displaySecondaryTitleField.length>0&&(e=this.formFields[this.displaySecondaryTitleField]),e},displayName:function(){var e=this.id;return this.displayNameField.length>0&&(e=this.formFields[this.displayNameField]),e},setIcon:function(){var e="fa-cube";return this.icon.length>0&&(e=this.icon),"fa fa-3x ".concat(e)}}},x=$,N=(a("e964"),Object(h["a"])(x,s,r,!1,null,"9eb32a66",null));t["default"]=N.exports},e964:function(e,t,a){"use strict";var s=a("4dc1"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-89eede02.dcd29d85.js.map