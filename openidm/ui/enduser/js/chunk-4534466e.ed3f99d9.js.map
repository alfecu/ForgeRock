{"version":3,"sources":["webpack:///./src/components/utils/LoadingButton.vue?dc0e","webpack:///./src/components/utils/SocialButtons.vue?054b","webpack:///src/components/utils/SocialButtons.vue","webpack:///./src/components/utils/SocialButtons.vue?8929","webpack:///./src/components/utils/SocialButtons.vue?6cd8","webpack:///./src/components/selfservice/common/Captcha.vue?c1d9","webpack:///src/components/selfservice/common/Captcha.vue","webpack:///./src/components/selfservice/common/Captcha.vue?3a12","webpack:///./src/components/selfservice/common/Captcha.vue","webpack:///./src/components/selfservice/common/GenericSelfService.vue?3063","webpack:///src/components/selfservice/common/GenericSelfService.vue","webpack:///./src/components/selfservice/common/GenericSelfService.vue?951d","webpack:///./src/components/selfservice/common/GenericSelfService.vue","webpack:///./src/components/utils/LoadingButton.vue?1cf6","webpack:///src/components/utils/LoadingButton.vue","webpack:///./src/components/utils/LoadingButton.vue?bbe7","webpack:///./src/components/utils/LoadingButton.vue?1191","webpack:///./src/components/selfservice/common/KBADefinitionFormGroup.vue?60b5","webpack:///src/components/selfservice/common/KBADefinitionFormGroup.vue","webpack:///./src/components/selfservice/common/KBADefinitionFormGroup.vue?47ed","webpack:///./src/components/selfservice/common/KBADefinitionFormGroup.vue","webpack:///./src/components/selfservice/registration/index.vue?f815","webpack:///./src/components/selfservice/registration/AllInOneRegistration.vue?1ad6","webpack:///./src/components/selfservice/registration/Consent.vue?ecbf","webpack:///src/components/selfservice/registration/Consent.vue","webpack:///./src/components/selfservice/registration/Consent.vue?8945","webpack:///./src/components/selfservice/registration/Consent.vue","webpack:///./src/components/selfservice/registration/UserDetails.vue?4ea0","webpack:///src/components/selfservice/registration/UserDetails.vue","webpack:///./src/components/selfservice/registration/UserDetails.vue?20b6","webpack:///./src/components/selfservice/registration/UserDetails.vue","webpack:///./src/components/selfservice/registration/KBASecurityAnswerDefinitionStage.vue?f686","webpack:///./src/components/utils/HorizontalRule.vue?9be3","webpack:///src/components/utils/HorizontalRule.vue","webpack:///./src/components/utils/HorizontalRule.vue?ed34","webpack:///./src/components/utils/HorizontalRule.vue","webpack:///src/components/selfservice/registration/KBASecurityAnswerDefinitionStage.vue","webpack:///./src/components/selfservice/registration/KBASecurityAnswerDefinitionStage.vue?4b1d","webpack:///./src/components/selfservice/registration/KBASecurityAnswerDefinitionStage.vue","webpack:///./src/components/selfservice/registration/TermsAndConditions.vue?157b","webpack:///src/components/selfservice/registration/TermsAndConditions.vue","webpack:///./src/components/selfservice/registration/TermsAndConditions.vue?7ac1","webpack:///./src/components/selfservice/registration/TermsAndConditions.vue","webpack:///src/components/selfservice/registration/AllInOneRegistration.vue","webpack:///./src/components/selfservice/registration/AllInOneRegistration.vue?3a45","webpack:///./src/components/selfservice/registration/AllInOneRegistration.vue","webpack:///./src/components/selfservice/registration/EmailValidation.vue?745d","webpack:///src/components/selfservice/registration/EmailValidation.vue","webpack:///./src/components/selfservice/registration/EmailValidation.vue?0052","webpack:///./src/components/selfservice/registration/EmailValidation.vue","webpack:///src/components/selfservice/registration/index.vue","webpack:///./src/components/selfservice/registration/index.vue?41f4","webpack:///./src/components/selfservice/registration/index.vue","webpack:///./src/components/utils/PolicyPasswordInput.vue?8e72","webpack:///./src/components/utils/PolicyPanel.vue?bc25","webpack:///src/components/utils/PolicyPanel.vue","webpack:///./src/components/utils/PolicyPanel.vue?2076","webpack:///./src/components/utils/PolicyPanel.vue?d5c4","webpack:///src/components/utils/PolicyPasswordInput.vue","webpack:///./src/components/utils/PolicyPasswordInput.vue?c6c5","webpack:///./src/components/utils/PolicyPasswordInput.vue","webpack:///./src/components/utils/SocialButtons.vue?0233","webpack:///./src/components/utils/PolicyPanel.vue?9dbc"],"names":["render","_vm","this","_h","$createElement","_c","_self","providers","_l","provider","index","key","staticClass","style","socialButtonStyles","attrs","on","$event","goToIDP","hover","uiConfig","buttonCustomStyleHover","buttonCustomStyle","buttonImage","class","iconClass","_v","_s","$t","buttonDisplayName","filterProviders","length","_e","staticRenderFns","component","apiType","_m","field","type","_f","ref","refInFor","text","model","value","saveFields","callback","$$v","$set","trim","expression","_n","save","loading","$emit","large","label","answer","options","questionId","customIndex","toLowerCase","required","unique_question","getDuplicates","answers","directives","name","rawName","showSelfService","loadingColor","selfServiceType","slot","title","subtitle","tag","selfServiceDetails","advanceStage","stages","consent","requirements","consentCheck","saveCheck","termsAndConditions","terms","inline","isSocialReg","property","socialValue","description","calculateValidation","saveDetails","preference","preferences","domProps","Array","isArray","_i","$$a","$$el","target","$$c","checked","$$i","concat","slice","preventDefault","insert","_t","setFailingPolicies","password","cols","policies","failedPolicies","i","policyColumns","policy","policyId","includes","policyFailures","params"],"mappings":"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","file":"js/chunk-4534466e.ed3f99d9.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingButton.vue?vue&type=style&index=0&id=18109016&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingButton.vue?vue&type=style&index=0&id=18109016&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.providers.length)?_c('div',[_vm._l((_vm.filteredProviders),function(provider,index){return _c('button',{key:index,staticClass:\"btn btn-lg btn-light btn-block fr-btn-social mb-3\",style:(_vm.socialButtonStyles[index]),attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.goToIDP(provider.provider)},\"mouseover\":function($event){return _vm.hover(index, provider.uiConfig.buttonCustomStyleHover)},\"mouseout\":function($event){return _vm.hover(index, provider.uiConfig.buttonCustomStyle)}}},[(provider.uiConfig.buttonImage)?_c('img',{attrs:{\"src\":'static/' + provider.uiConfig.buttonImage}}):_c('i',{class:['fab fa-lg', provider.uiConfig.iconClass]}),(_vm.signin)?_c('span',{staticClass:\"ml-1\"},[_vm._v(_vm._s(_vm.$t(\"pages.selfservice.social.signIn\"))+\" \"+_vm._s(provider.uiConfig.buttonDisplayName))]):_c('span',{staticClass:\"ml-1\"},[_vm._v(_vm._s(_vm.$t(\"pages.selfservice.social.signUp\"))+\" \"+_vm._s(provider.uiConfig.buttonDisplayName))])])}),(this.filterProviders.length === 0)?_c('div',{staticClass:\"fr-form-break text-muted mb-3\"},[_c('div'),_c('div',[_vm._v(_vm._s(_vm.$t(\"pages.selfservice.social.or\")))]),_c('div')]):_vm._e()],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <div v-if=\"providers.length\">\n        <button class=\"btn btn-lg btn-light btn-block fr-btn-social mb-3\"\n                type=\"button\"\n                v-for=\"(provider, index) in filteredProviders\"\n                :key=\"index\"\n                :style=\"socialButtonStyles[index]\"\n                @click=\"goToIDP(provider.provider)\"\n                @mouseover=\"hover(index, provider.uiConfig.buttonCustomStyleHover)\"\n                @mouseout=\"hover(index, provider.uiConfig.buttonCustomStyle)\">\n\n            <img v-if=\"provider.uiConfig.buttonImage\" :src=\"'static/' + provider.uiConfig.buttonImage\"/>\n            <i v-else :class=\"['fab fa-lg', provider.uiConfig.iconClass]\"></i>\n\n            <span class=\"ml-1\" v-if=\"signin\">{{$t(\"pages.selfservice.social.signIn\")}} {{provider.uiConfig.buttonDisplayName}}</span>\n            <span class=\"ml-1\" v-else>{{$t(\"pages.selfservice.social.signUp\")}} {{provider.uiConfig.buttonDisplayName}}</span>\n        </button>\n\n        <div class=\"fr-form-break text-muted mb-3\" v-if=\"this.filterProviders.length === 0\">\n            <div></div>\n            <div>{{$t(\"pages.selfservice.social.or\")}}</div>\n            <div></div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport _ from 'lodash';\n\n/**\n* @description Controlling component for initializing oauth process for login and registration.\n* This component controls the displaying of the buttons based on which providers are configured.\n*\n* @fires GET authentication - Returns a list of available configured providers.\n* @fires POST identityProviders?_action=getAuthRedirect - Generates the redirect URL used to go to the selected provider and begin the Oauth authentication process\n*\n**/\nexport default {\n    name: 'Social-Buttons',\n    props: {\n        'signin': {\n            type: Boolean,\n            default: false\n        },\n        'filterProviders': {\n            type: Array,\n            default: () => { return []; }\n        },\n        'filterProvidersObjects': {\n            type: Array,\n            default: () => { return []; }\n        }\n    },\n    computed: {\n        filteredProviders () {\n            return _.filter(this.providers, (provider) => { return provider.uiConfig; });\n        }\n    },\n    data () {\n        return {\n            providers: [],\n            socialButtonStyles: []\n        };\n    },\n    mounted () {\n        /* istanbul ignore next */\n        this.loadData();\n    },\n    methods: {\n        loadData () {\n            /* istanbul ignore next */\n            const socialInstance = this.getRequestService({\n                headers: this.getAnonymousHeaders()\n            });\n                /* istanbul ignore next */\n            socialInstance.get('/authentication')\n                .then((response) => {\n                    this.providers = _.filter(response.data.providers || [], (provider, index) => {\n                        if (this.filterProviders.length === 0 || _.includes(this.filterProviders, provider.provider)) {\n                            return true;\n                        }\n                    });\n\n                    if (this.providers.length) {\n                        _.each(this.providers, (provider, index) => {\n                            this.$set(this.socialButtonStyles, index, provider.uiConfig.buttonCustomStyle);\n\n                            if (provider.provider === 'salesforce') {\n                                provider.uiConfig.iconClass = 'fa-salesforce';\n                            }\n                        });\n                    } else if (this.filterProvidersObjects.length) {\n                        this.providers = this.filterProvidersObjects;\n                    }\n                })\n                .catch((error) => {\n                    this.displayNotification('error', error.response.data.message);\n                });\n        },\n        hover (index, style) {\n            this.$set(this.socialButtonStyles, index, style);\n        },\n        goToIDP (provider) {\n            /* istanbul ignore next */\n            const socialInstance = this.getRequestService({\n                headers: this.getAnonymousHeaders()\n            });\n\n            /* istanbul ignore next */\n            socialInstance.post('/authentication?_action=logout').then(() => {\n                /* istanbul ignore next */\n                socialInstance.post('/identityProviders?_action=getAuthRedirect', {\n                    'provider': provider,\n                    'landingPage': `${window.location.protocol}/${window.location.host}/#/login?_oauthReturn=true&provider=${provider}&gotoURL=%23`\n                })\n                    .then((response) => {\n                        localStorage.setItem('dataStoreToken', response.data.token);\n                        window.location.href = response.data.redirect;\n                    })\n                    .catch((error) => {\n                        /* istanbul ignore next */\n                        this.displayNotification('error', error.response.data.message);\n                    });\n            })\n                .catch((error) => {\n                    /* istanbul ignore next */\n                    this.displayNotification('error', error.response.data.message);\n                });\n        }\n    }\n};\n</script>\n\n<style type=\"scss\" scoped>\n    .fr-btn-social img{\n        max-width: 21px;\n        margin-right: 5px;\n    }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SocialButtons.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SocialButtons.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SocialButtons.vue?vue&type=template&id=0852992a&scoped=true&\"\nimport script from \"./SocialButtons.vue?vue&type=script&lang=js&\"\nexport * from \"./SocialButtons.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SocialButtons.vue?vue&type=style&index=0&id=0852992a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0852992a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mb-4\",attrs:{\"id\":\"captchaBody\"}},[(_vm.apiType)?_c('p',{staticClass:\"text-center mb-4\"},[_vm._v(\" \"+_vm._s(_vm.$t((\"pages.selfservice.headers.\" + _vm.apiType + \".description\")))+\" \")]):_vm._e(),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recaptcha-wrapper \"},[_c('div',{staticClass:\"recaptcha-bound\"},[_c('div',{attrs:{\"id\":\"recaptchaContainer\"}})])])}]\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <div id=\"captchaBody\" class=\"mb-4\">\n        <p class='text-center mb-4' v-if=\"apiType\">\n            {{$t(`pages.selfservice.headers.${apiType}.description`)}}\n        </p>\n        <div class=\"recaptcha-wrapper \">\n            <div class=\"recaptcha-bound\">\n                <div id=\"recaptchaContainer\"></div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n/**\n * @description Selfservice stage for multiple selfservice flows, displays a google captcha\n *\n **/\nimport _ from 'lodash';\n\nexport default {\n    name: 'Captcha',\n    props: {\n        advanceStage: { required: false },\n        selfServiceDetails: { required: true },\n        apiType: { required: false }\n    },\n    created () {\n        let recaptchaScript = document.createElement('script');\n\n        recaptchaScript.setAttribute('src', 'https://www.google.com/recaptcha/api.js');\n        document.head.appendChild(recaptchaScript);\n    },\n    mounted () {\n        this.loadRecaptcha();\n    },\n    methods: {\n        loadRecaptcha () {\n            /* istanbul ignore next */\n            if (_.isUndefined(this.selfServiceDetails.requirements.properties.response.recaptchaSiteKey) || this.selfServiceDetails.requirements.properties.response.recaptchaSiteKey.length === 0) {\n                this.displayNotification('error', this.$t('pages.selfservice.captchaError'));\n            } else {\n                setTimeout(() => {\n                    if (typeof window.grecaptcha === 'undefined') {\n                        this.loadRecaptcha();\n                    } else {\n                        window.grecaptcha.render('recaptchaContainer', {\n                            sitekey: this.selfServiceDetails.requirements.properties.response.recaptchaSiteKey,\n                            callback: this.handleCaptchaCallback\n                        });\n                    }\n                }, 500);\n            }\n        },\n        handleCaptchaCallback (response) {\n            this.recaptchaResponse = response;\n            /* istanbul ignore next */\n            if (this.$listeners.advanceStage) {\n                this.$emit('advanceStage', this.getData());\n            }\n        },\n        getData () {\n            return {\n                response: this.recaptchaResponse,\n                'g-recaptcha-response': this.recaptchaResponse\n            };\n        }\n    }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Captcha.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Captcha.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Captcha.vue?vue&type=template&id=470a1ede&\"\nimport script from \"./Captcha.vue?vue&type=script&lang=js&\"\nexport * from \"./Captcha.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._l((_vm.displayDetails),function(field,index){return [((field.type === 'string' || field.type === 'number'))?_c('b-form-group',{key:'genericField' +index,attrs:{\"label\":_vm._f(\"startCase\")(field.key),\"label-for\":\"field.key\",\"horizontal\":\"\"}},[(field.type === 'string')?_c('b-form-input',{ref:index === 0 ? 'focusInput' : '',refInFor:true,attrs:{\"name\":field.key,\"placeholder\":field.text,\"type\":\"text\",\"autocomplete\":field.key},model:{value:(_vm.saveFields[field.key]),callback:function ($$v) {_vm.$set(_vm.saveFields, field.key, (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"saveFields[field.key]\"}}):_vm._e(),(field.type === 'number')?_c('b-form-input',{ref:index === 0 ? 'focusInput' : '',refInFor:true,attrs:{\"horizontal\":\"\",\"name\":field.key,\"type\":\"number\",\"autocomplete\":field.key},model:{value:(_vm.saveFields[field.key]),callback:function ($$v) {_vm.$set(_vm.saveFields, field.key, _vm._n($$v))},expression:\"saveFields[field.key]\"}}):_vm._e()],1):_vm._e(),(field.type === 'boolean')?_c('b-form-group',{key:'genericField' +index},[_c('div',{staticClass:\"form-row\"},[_c('label',{staticClass:\"col-form-label col-sm-3\",attrs:{\"for\":field.key}},[_vm._v(_vm._s(_vm._f(\"startCase\")(field.key)))]),_c('div',{staticClass:\"mr-auto\"},[_c('toggle-button',{staticClass:\"mt-2 p-0 fr-toggle-primary\",attrs:{\"height\":28,\"width\":56,\"sync\":true,\"cssColors\":true},model:{value:(_vm.saveFields[field.key]),callback:function ($$v) {_vm.$set(_vm.saveFields, field.key, $$v)},expression:\"saveFields[field.key]\"}})],1)])]):_vm._e()]}),_c('b-button',{staticClass:\"mt-4\",attrs:{\"block\":true,\"size\":\"lg\",\"variant\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\" \"+_vm._s(_vm.$t(\"common.form.submit\"))+\" \")])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <div>\n        <template v-for=\"(field, index) in displayDetails\">\n            <b-form-group :label=\"field.key | startCase\" label-for=\"field.key\" horizontal :key=\"'genericField' +index\" v-if=\"(field.type === 'string' || field.type === 'number')\">\n                <b-form-input  :ref=\"index === 0 ? 'focusInput' : ''\" v-if=\"field.type === 'string'\"\n                               :name=\"field.key\"\n                               :placeholder=\"field.text\"\n                               type=\"text\"\n                               :autocomplete=\"field.key\"\n                               v-model.trim=\"saveFields[field.key]\"></b-form-input>\n\n                <b-form-input horizontal :ref=\"index === 0 ? 'focusInput' : ''\" v-if=\"field.type === 'number'\"\n                              :name=\"field.key\"\n                              type=\"number\"\n                              :autocomplete=\"field.key\"\n                              v-model.number=\"saveFields[field.key]\"></b-form-input>\n            </b-form-group>\n\n            <!-- for boolean values -->\n            <b-form-group :key=\"'genericField' +index\" v-if=\"field.type === 'boolean'\">\n                <div class=\"form-row\">\n                    <label class=\"col-form-label col-sm-3\" :for=\"field.key\">{{field.key | startCase}}</label>\n                    <div class=\"mr-auto\">\n                        <toggle-button class=\"mt-2 p-0 fr-toggle-primary\"\n                                       :height=\"28\"\n                                       :width=\"56\"\n                                       :sync=\"true\"\n                                       :cssColors=\"true\"\n                                       v-model=\"saveFields[field.key]\"/>\n                    </div>\n                </div>\n            </b-form-group>\n        </template>\n        <b-button @click=\"save\" class='mt-4' :block=\"true\" size=\"lg\" variant=\"primary\">\n            {{$t(\"common.form.submit\")}}\n        </b-button>\n    </div>\n</template>\n\n<script>\nimport _ from 'lodash';\n\n/**\n * @description Selfservice stage for multiple selfservice flows, attempts to auto generate a form for a user to fill out. Currently\n * generates only numbers, strings and boolean fields. This stage will only load when no other stage is found.\n *\n **/\nexport default {\n    name: 'Generic-Self-Service',\n    props: {\n        selfServiceDetails: { required: true }\n    },\n    data () {\n        let saveData = {},\n            displayDetails = [];\n\n        if (this.selfServiceDetails && this.selfServiceDetails.requirements && this.selfServiceDetails.requirements.properties) {\n            _.each(this.selfServiceDetails.requirements.properties, (prop, key) => {\n                displayDetails.push({\n                    type: prop.type,\n                    text: prop.description,\n                    key: key\n                });\n\n                if (prop.type === 'string') {\n                    saveData[key] = '';\n                } else if (prop.type === 'boolean') {\n                    saveData[key] = false;\n                } else {\n                    saveData[key] = null;\n                }\n            });\n        }\n\n        return {\n            saveFields: saveData,\n            displayDetails: displayDetails\n        };\n    },\n    methods: {\n        getData () {\n            return this.saveFields;\n        },\n\n        save () {\n            this.$emit('advanceStage', this.getData());\n        },\n\n        isValid () {\n            return Promise.resolve(true);\n        }\n    },\n    filters: {\n        startCase (value) {\n            return _.startCase(value);\n        }\n    }\n};\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GenericSelfService.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GenericSelfService.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GenericSelfService.vue?vue&type=template&id=1e3745af&scoped=true&\"\nimport script from \"./GenericSelfService.vue?vue&type=script&lang=js&\"\nexport * from \"./GenericSelfService.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e3745af\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{class:['btn btn-primary d-flex align-items-center', {'disabled': _vm.loading}],attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('click')}}},[_c('span',{class:[{'align-self-start': !_vm.large, 'm-auto': _vm.large}]},[_vm._v(\" \"+_vm._s(_vm.label)+\" \")]),_c('span',{class:['fr-grow', {'fr-grow-in': _vm.loading}]},[_c('transition',{attrs:{\"name\":\"fr-fade\"}},[(_vm.loading)?_c('clip-loader',{staticClass:\"position-relative fr-clip-loader ml-3\",attrs:{\"color\":'white',\"size\":'1rem'}}):_vm._e()],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n        <button :class=\"['btn btn-primary d-flex align-items-center', {'disabled': loading}]\" type=\"button\" @click=\"$emit('click')\">\n            <span :class=\"[{'align-self-start': !large, 'm-auto': large}]\">\n                {{label}}\n            </span>\n            <span :class=\"['fr-grow', {'fr-grow-in': loading}]\">\n                <transition name=\"fr-fade\">\n                    <clip-loader v-if=\"loading\" :color=\"'white'\" :size=\"'1rem'\" class=\"position-relative fr-clip-loader ml-3\"></clip-loader>\n                </transition>\n            </span>\n        </button>\n</template>\n<script>\nimport { ClipLoader } from 'vue-spinner/dist/vue-spinner.min.js';\n\n/**\n * @description Button with built in loading spinner that can be used to show users something is loading\n *\n **/\nexport default {\n    name: 'LoadingButton',\n    components: { ClipLoader },\n    props: {\n        label: String,\n        loading: {\n            type: Boolean,\n            default: false\n        },\n        large: {\n            type: Boolean,\n            default: false\n        }\n    }\n};\n</script>\n<style lang=\"scss\" scoped>\n    .fr-grow {\n        width: 0;\n        transition: all .25s ease;\n    }\n    .fr-grow-in {\n        width: 3rem;\n    }\n\n    .fr-fade-enter-active {\n        transition: all .125s ease;\n    }\n    .fr-fade-leave {\n        transition: all .125s ease;\n    }\n    .fr-fade-enter, .fr-fade-leave-to {\n        opacity: 0;\n    }\n    .fr-fade-enter-to {\n        opacity: 1\n    }\n    .fr-clip-loader {\n        top: 0.15rem;\n    }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoadingButton.vue?vue&type=template&id=18109016&scoped=true&\"\nimport script from \"./LoadingButton.vue?vue&type=script&lang=js&\"\nexport * from \"./LoadingButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LoadingButton.vue?vue&type=style&index=0&id=18109016&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"18109016\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ValidationObserver',{ref:\"observer\",attrs:{\"slim\":\"\"}},_vm._l((_vm.answers),function(answer,key){return _c('b-form-group',{key:key,staticClass:\"mb-0\",attrs:{\"label-text-align\":\"left\"}},[_c('b-form-select',{staticClass:\"mb-3\",attrs:{\"options\":_vm.options},model:{value:(answer.questionId),callback:function ($$v) {_vm.$set(answer, \"questionId\", $$v)},expression:\"answer.questionId\"}}),(answer.questionId === _vm.customIndex)?_c('fr-floating-label-input',{staticClass:\"mb-3\",attrs:{\"type\":\"text\",\"fieldName\":_vm.$t('common.user.kba.question').toLowerCase() + key,\"label\":_vm.$t('common.user.kba.question'),\"validateRules\":{required: true, unique_question: _vm.getDuplicates(key)}},model:{value:(answer.customQuestion),callback:function ($$v) {_vm.$set(answer, \"customQuestion\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"answer.customQuestion\"}}):_vm._e(),_c('fr-floating-label-input',{staticClass:\"mb-3\",attrs:{\"type\":\"text\",\"fieldName\":_vm.$t('common.user.kba.answer').toLowerCase() + key,\"label\":_vm.$t('common.user.kba.answer'),\"validateRules\":'required'},model:{value:(answer.answer),callback:function ($$v) {_vm.$set(answer, \"answer\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"answer.answer\"}}),(key !== _vm.answers.length - 1)?_c('hr'):_vm._e()],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <div>\n        <ValidationObserver ref=\"observer\" slim>\n            <b-form-group label-text-align=\"left\" class=\"mb-0\"\n                v-for=\"(answer, key) in answers\" :key=\"key\">\n\n                    <b-form-select class=\"mb-3\"\n                        v-model=\"answer.questionId\"\n                        :options=\"options\"></b-form-select>\n\n                    <fr-floating-label-input class=\"mb-3\" type=\"text\"\n                        v-if=\"answer.questionId === customIndex\"\n                        v-model.trim=\"answer.customQuestion\"\n                        :fieldName=\"$t('common.user.kba.question').toLowerCase() + key\"\n                        :label=\"$t('common.user.kba.question')\"\n                        :validateRules=\"{required: true, unique_question: getDuplicates(key)}\"></fr-floating-label-input>\n\n                    <fr-floating-label-input class=\"mb-3\" type=\"text\"\n                        v-model.trim=\"answer.answer\"\n                        :fieldName=\"$t('common.user.kba.answer').toLowerCase() + key\"\n                        :label=\"$t('common.user.kba.answer')\"\n                        :validateRules=\"'required'\"></fr-floating-label-input>\n\n                <hr v-if=\"key !== answers.length - 1\">\n            </b-form-group>\n        </ValidationObserver>\n    </div>\n</template>\n<script>\nimport _ from 'lodash';\nimport FloatingLabelInput from '@/components/utils/FloatingLabelInput';\nimport { extend } from 'vee-validate';\n\n/**\n * @description Common selfservice component for defining security questions\n *\n **/\nexport default {\n    name: 'KBA-Definition-Form-Group',\n    props: {\n        selfServiceDetails: { required: true },\n        inline: {\n            required: false,\n            default: false\n        }\n    },\n    components: {\n        'fr-floating-label-input': FloatingLabelInput\n    },\n    data () {\n        let kba = this.selfServiceDetails.requirements.properties.kba,\n            answers = _.times(kba.minItems, () => ({ answer: null, questionId: null, customQuestion: null })),\n            customIndex = 'custom';\n\n        return { kba, answers, customIndex };\n    },\n    computed: {\n        predefinedQuestionOptions () {\n            return _.map(this.kba.questions, (question) => {\n                let value = question.id,\n                    text = question.question[this.$i18n.locale] || question.question[this.$i18n.fallbackLocale],\n                    disabled = !_.isUndefined(_.find(this.answers, { questionId: question.id }));\n\n                return { value, text, disabled };\n            });\n        },\n        predefinedQuestionText () {\n            return this.predefinedQuestionOptions.map((question) => question.text);\n        },\n        options () {\n            let placeholder = { value: null, text: this.$t('common.user.kba.selectQuestion'), disabled: true },\n                customQuestionOption = { value: 'custom', text: this.$t('common.user.kba.custom'), disabled: false },\n                tempOptions = [];\n\n            tempOptions = tempOptions.concat(placeholder, this.predefinedQuestionOptions, customQuestionOption);\n\n            return tempOptions;\n        }\n    },\n    methods: {\n        getData () {\n            return {\n                kba: this.answers.map((answer) => {\n                    return _.omit(answer, answer.questionId === this.customIndex ? 'questionId' : 'customQuestion');\n                })\n            };\n        },\n        getDuplicates (key) {\n            return _.clone(this.answers)\n                .map((answer) => answer.customQuestion)\n                .filter((question, index) => index !== key && question)\n                .concat(this.predefinedQuestionText);\n        },\n        isValid () {\n            /* istanbul ignore next */\n            return this.$refs.observer.validate();\n        }\n    },\n    created () {\n        /* istanbul ignore next */\n        extend('unique_question', {\n            getMessage: (field, exclusions) => this.$t('common.user.kba.notUnique'),\n            validate: (value, exclusions) => {\n                const trimToLower = (string) => _.trim(_.toLower(string));\n\n                return !_.includes(_.map(exclusions, trimToLower), trimToLower(value));\n            }\n        });\n    }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./KBADefinitionFormGroup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./KBADefinitionFormGroup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./KBADefinitionFormGroup.vue?vue&type=template&id=51d2ab7e&\"\nimport script from \"./KBADefinitionFormGroup.vue?vue&type=script&lang=js&\"\nexport * from \"./KBADefinitionFormGroup.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"h-100\"},[_c('b-container',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showSelfService),expression:\"!showSelfService\"}],staticClass:\"h-100 px-0\",attrs:{\"fluid\":\"\"}},[_c('div',{staticClass:\"h-100 d-flex\"},[_c('div',{staticClass:\"m-auto fr-center-card\"},[_c('bounce-loader',{attrs:{\"color\":_vm.loadingColor}})],1)])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showSelfService),expression:\"showSelfService\"}]},[(_vm.selfServiceType !== 'localAutoLogin')?_c('fr-center-card',{attrs:{\"showLogo\":true}},[_c('div',{attrs:{\"slot\":\"center-card-header\"},slot:\"center-card-header\"},[_c('h2',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.title.length > 0),expression:\"title.length > 0\"}],staticClass:\"h2\"},[_vm._v(_vm._s(_vm.title))]),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.subtitle.length > 0),expression:\"subtitle.length > 0\"}],staticClass:\"text-center mb-0\"},[_vm._v(_vm._s(_vm.subtitle))])]),_c('b-card-body',{attrs:{\"slot\":\"center-card-body\"},slot:\"center-card-body\"},[_c(_vm.selfServiceType,{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showSelfService),expression:\"showSelfService\"}],ref:\"selfServiceStage\",tag:\"component\",attrs:{\"selfServiceDetails\":_vm.selfServiceDetails},on:{\"advanceStage\":_vm.advanceStage}})],1),_c('b-card-footer',{attrs:{\"slot\":\"center-card-footer\"},slot:\"center-card-footer\"},[_vm._v(\" \"+_vm._s(_vm.$t('pages.selfservice.registration.haveAccount'))+\" \"),_c('router-link',{attrs:{\"action\":\"\",\"to\":{name: 'Login'}}},[_vm._v(_vm._s(_vm.$t('pages.selfservice.registration.signIn')))])],1)],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fr-all-in-one-container\"},[(_vm.stages.idmUserDetails)?_c('idmUserDetails',{attrs:{\"inline\":true,\"selfServiceDetails\":_vm.selfServiceDetails}}):_vm._e(),(_vm.stages.kbaSecurityAnswerDefinitionStage)?_c('kbaSecurityAnswerDefinitionStage',{attrs:{\"inline\":true,\"selfServiceDetails\":_vm.selfServiceDetails}}):_vm._e(),(_vm.stages.captcha)?_c('Captcha',{attrs:{\"self-service-details\":_vm.selfServiceDetails}}):_vm._e(),(_vm.stages.consent && _vm.selfServiceDetails.requirements && _vm.selfServiceDetails.requirements.consent)?[_c('b-modal',{ref:\"consentModal\",attrs:{\"title\":_vm.$t('pages.selfservice.registration.consent.title')},on:{\"hide\":function($event){_vm.loading = false;}}},[_c('Consent',{attrs:{\"inline\":true,\"selfServiceDetails\":_vm.selfServiceDetails}}),_c('b-form-checkbox',{attrs:{\"plain\":\"\",\"value\":false,\"unchecked-value\":true},model:{value:(_vm.consentCheck),callback:function ($$v) {_vm.consentCheck=$$v},expression:\"consentCheck\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"pages.selfservice.registration.consent.agreement\"))+\" \")]),_c('div',{staticClass:\"w-100\",attrs:{\"slot\":\"modal-footer\"},slot:\"modal-footer\"},[_c('b-btn',{staticClass:\"float-right\",attrs:{\"disabled\":_vm.consentCheck,\"size\":\"sm\",\"variant\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\" \"+_vm._s(_vm.$t(\"common.form.okay\"))+\" \")])],1)],1)]:_vm._e(),_c('fr-loading-button',{staticClass:\"mt-2 mb-3 btn-lg btn-block\",attrs:{\"type\":\"button\",\"variant\":\"primary\",\"label\":_vm.$t('common.form.signUp'),\"loading\":_vm.loading,\"large\":true},on:{\"click\":_vm.saveCheck}}),(_vm.stages.termsAndConditions && _vm.selfServiceDetails.requirements && _vm.selfServiceDetails.requirements.terms)?_c('TermsAndConditions',{attrs:{\"inline\":true,\"selfServiceDetails\":_vm.selfServiceDetails}}):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.inline === false)?_c('h3',[_vm._v(_vm._s(_vm.$t(\"pages.selfservice.registration.consent.title\")))]):_vm._e(),_c('div',{staticClass:\"d-block text-center\"},[_c('p',[_vm._v(_vm._s(_vm.selfServiceDetails.requirements.consent))])]),(_vm.inline === false)?_c('b-button',{attrs:{\"block\":true,\"size\":\"lg\",\"variant\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\" \"+_vm._s(_vm.$t(\"common.form.agree\"))+\" \")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <div>\n        <h3 v-if=\"inline === false\">{{$t(\"pages.selfservice.registration.consent.title\")}}</h3>\n        <div class=\"d-block text-center\">\n            <p>{{selfServiceDetails.requirements.consent}}</p>\n        </div>\n\n        <b-button v-if=\"inline === false\" @click=\"save\" :block=\"true\" size=\"lg\" variant=\"primary\">\n            {{$t(\"common.form.agree\")}}\n        </b-button>\n    </div>\n</template>\n\n<script>\n/**\n * @description Selfservice stage for consent depending on all in one displays as a dialog or a basic page text display\n *\n **/\nexport default {\n    name: 'Consent',\n    props: {\n        selfServiceDetails: { required: true },\n        inline: {\n            required: false,\n            default: false\n        }\n    },\n    methods: {\n        getData () {\n            return {\n                consentGiven: 'true'\n            };\n        },\n\n        save () {\n            this.$emit('advanceStage', this.getData());\n        },\n\n        isValid () {\n            return Promise.resolve(true);\n        }\n    }\n};\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Consent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Consent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Consent.vue?vue&type=template&id=1d2c556e&scoped=true&\"\nimport script from \"./Consent.vue?vue&type=script&lang=js&\"\nexport * from \"./Consent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d2c556e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ValidationObserver',{ref:\"observer\",attrs:{\"slim\":\"\"}},[_c('b-form',[(!_vm.isSocialReg)?_c('fr-social-buttons',{attrs:{\"signin\":false}}):_vm._e(),_vm._l((_vm.userDetails),function(property,key){return _c('b-form-group',{key:key,staticClass:\"mb-0\"},[_c('fr-floating-label-input',{attrs:{\"defaultValue\":property.socialValue,\"fieldName\":key,\"label\":property.description,\"validateRules\":_vm.calculateValidation(property),\"type\":\"text\"},model:{value:(_vm.saveDetails[key]),callback:function ($$v) {_vm.$set(_vm.saveDetails, key, $$v)},expression:\"saveDetails[key]\"}})],1)}),(!_vm.isSocialReg)?_c('fr-password-policy-input',{attrs:{\"policyApi\":\"selfservice/registration\",\"cols\":1},model:{value:(_vm.saveDetails.password),callback:function ($$v) {_vm.$set(_vm.saveDetails, \"password\", $$v)},expression:\"saveDetails.password\"}}):_vm._e(),_c('div',{staticClass:\"form-group mb-4\"},_vm._l((_vm.userPreferences),function(preference,key){return _c('div',{key:key,staticClass:\"custom-control custom-checkbox mb-2\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.saveDetails.preferences[key]),expression:\"saveDetails.preferences[key]\"}],staticClass:\"custom-control-input\",attrs:{\"type\":\"checkbox\",\"id\":key},domProps:{\"checked\":Array.isArray(_vm.saveDetails.preferences[key])?_vm._i(_vm.saveDetails.preferences[key],null)>-1:(_vm.saveDetails.preferences[key])},on:{\"change\":function($event){var $$a=_vm.saveDetails.preferences[key],$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.saveDetails.preferences, key, $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.saveDetails.preferences, key, $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.saveDetails.preferences, key, $$c)}}}}),_c('label',{staticClass:\"custom-control-label\",attrs:{\"for\":key}},[_vm._v(_vm._s(preference.description))])])}),0),(_vm.inline === false)?_c('b-button',{attrs:{\"block\":true,\"size\":\"lg\",\"variant\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\" \"+_vm._s(_vm.$t(\"common.form.signUp\"))+\" \")]):_vm._e()],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <ValidationObserver ref=\"observer\" slim>\n        <b-form>\n            <fr-social-buttons v-if=\"!isSocialReg\" :signin=\"false\"></fr-social-buttons>\n            <b-form-group class=\"mb-0\" v-for=\"(property, key) in userDetails\" :key=\"key\">\n                <fr-floating-label-input\n                        :defaultValue=\"property.socialValue\"\n                        :fieldName=\"key\"\n                        :label=\"property.description\"\n                        :validateRules=\"calculateValidation(property)\"\n                        type=\"text\"\n                        v-model=\"saveDetails[key]\"></fr-floating-label-input>\n            </b-form-group>\n\n            <fr-password-policy-input v-if=\"!isSocialReg\" policyApi=\"selfservice/registration\" :cols=\"1\" v-model=\"saveDetails.password\" />\n            <!-- Vue Bootstrap custom radio button seems to have problems so just using none component-->\n            <div class=\"form-group mb-4\">\n                <div v-for=\"(preference, key) in userPreferences\" :key=\"key\" class=\"custom-control custom-checkbox mb-2\">\n                    <input v-model=\"saveDetails.preferences[key]\" type=\"checkbox\" class=\"custom-control-input\" :id=\"key\">\n                    <label class=\"custom-control-label\" :for=\"key\">{{preference.description}}</label>\n                </div>\n            </div>\n\n            <b-button v-if=\"inline === false\" @click=\"save\" :block=\"true\" size=\"lg\" variant=\"primary\">\n                {{$t(\"common.form.signUp\")}}\n            </b-button>\n        </b-form>\n    </ValidationObserver>\n</template>\n\n<script>\nimport _ from 'lodash';\nimport FloatingLabelInput from '@/components/utils/FloatingLabelInput';\nimport PolicyPasswordInput from '@/components/utils/PolicyPasswordInput';\nimport SocialButtons from '@/components/utils/SocialButtons';\n\n/**\n * @description Selfservice stage for generating user details and displaying social buttons available. Works the same alone and in allinone\n *\n **/\nexport default {\n    name: 'User-Details',\n    components: {\n        'fr-floating-label-input': FloatingLabelInput,\n        'fr-password-policy-input': PolicyPasswordInput,\n        'fr-social-buttons': SocialButtons\n    },\n    props: {\n        selfServiceDetails: { required: true },\n        inline: {\n            required: false,\n            default: false\n        }\n    },\n    data () {\n        let data = {\n            userDetails: {},\n            saveDetails: {},\n            userPreferences: {},\n            isSocialReg: _.get(this.selfServiceDetails, 'tag') !== 'initial'\n        };\n\n        if (this.selfServiceDetails.requirements && this.selfServiceDetails.requirements.registrationProperties) {\n            data.userDetails = this.selfServiceDetails.requirements.registrationProperties.properties;\n\n            if (_.has(this.selfServiceDetails, 'requirements.properties.user.default') &&\n                    !_.isUndefined(this.selfServiceDetails, 'requirements.properties.user.default')) {\n                _.each(this.selfServiceDetails.requirements.properties.user.default, (value, key) => {\n                    data.userDetails[key].socialValue = value;\n                });\n            }\n\n            _.each(this.selfServiceDetails.requirements.registrationProperties.required, (prop) => {\n                data.userDetails[prop].required = true;\n            });\n\n            _.each(this.selfServiceDetails.requirements.registrationProperties.properties, (value, key) => {\n                data.saveDetails[key] = '';\n            });\n        }\n\n        if (this.selfServiceDetails.requirements && this.selfServiceDetails.requirements.registrationPreferences) {\n            data.saveDetails.preferences = {};\n            data.userPreferences = this.selfServiceDetails.requirements.registrationPreferences;\n\n            _.each(data.userPreferences, (value, key) => {\n                data.saveDetails.preferences[key] = false;\n            });\n        }\n\n        data.saveDetails.password = '';\n\n        return data;\n    },\n    methods: {\n        getData () {\n            let details = _.clone(this.saveDetails);\n\n            delete details.confirmPassword;\n\n            if (this.isSocialReg) {\n                delete details.password;\n            }\n\n            return {\n                user: details\n            };\n        },\n\n        // Add additional frontend checks for field validation here\n        calculateValidation (property) {\n            let validators = [];\n\n            if (property.required) {\n                validators.push('required');\n            }\n\n            if (property.policies) {\n                // Add policy vee validators correlations here\n                _.each(property.policies, (policy) => {\n                    if (policy.policyId === 'valid-email-address-format') {\n                        validators.push('email');\n                    }\n                });\n            }\n\n            return validators.join('|');\n        },\n\n        save () {\n            // Need to ignore this validation because it does not preform in testing due to vue validate\n            /* istanbul ignore next */\n            this.isValid().then((valid) => {\n                if (valid) {\n                    this.$emit('advanceStage', this.getData());\n                } else {\n                    this.displayNotification('error', this.$t('pages.selfservice.registration.pleaseComplete'));\n                }\n            });\n        },\n\n        isValid () {\n            /* istanbul ignore next */\n            return this.$refs.observer.validate();\n        }\n    }\n};\n</script>\n\n<style scoped lang=\"scss\"></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserDetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserDetails.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserDetails.vue?vue&type=template&id=f4d69062&scoped=true&\"\nimport script from \"./UserDetails.vue?vue&type=script&lang=js&\"\nexport * from \"./UserDetails.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f4d69062\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form',{staticClass:\"mb-4\",attrs:{\"id\":\"kbaDefinition\"},on:{\"submit\":function($event){$event.preventDefault();}}},[(_vm.inline)?_c('fr-horizontal-rule',{attrs:{\"insert\":\"<i class='fa fa-lock'></i>\"}}):_vm._e(),_c('p',{staticClass:\"text-center\"},[_vm._v(_vm._s(_vm.$t('common.user.kba.description')))]),_c('fr-kba-form-group',{ref:\"kbaFormGroup\",attrs:{\"selfServiceDetails\":_vm.selfServiceDetails}}),(!_vm.inline)?_c('b-button',{attrs:{\"block\":true,\"size\":\"lg\",\"variant\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(_vm._s(_vm.$t(\"pages.selfservice.registration.completeRegistration\")))]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_vm._m(0),_c('div',{staticClass:\"col-auto pt-1\",domProps:{\"innerHTML\":_vm._s(_vm.insert)}},[_vm._v(_vm._s(_vm.insert))]),_vm._m(1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col pr-0\"},[_c('hr')])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col pl-0\"},[_c('hr')])}]\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <div class=\"row\">\n            <div class=\"col pr-0\"><hr></div>\n            <div class=\"col-auto pt-1\" v-html=\"insert\">{{ insert }}</div>\n            <div class=\"col pl-0\"><hr></div>\n        </div>\n</template>\n\n<script>\n/**\n * @description Component for making a horizontal rule line with text in the middle\n *\n **/\nexport default {\n    name: 'Horizontal-Rule',\n    props: ['insert']\n};\n</script>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HorizontalRule.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HorizontalRule.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HorizontalRule.vue?vue&type=template&id=b2625ffe&scoped=true&\"\nimport script from \"./HorizontalRule.vue?vue&type=script&lang=js&\"\nexport * from \"./HorizontalRule.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b2625ffe\",\n  null\n  \n)\n\nexport default component.exports","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <b-form @submit.prevent id=\"kbaDefinition\" class=\"mb-4\">\n        <fr-horizontal-rule v-if=\"inline\" insert=\"<i class='fa fa-lock'></i>\"></fr-horizontal-rule>\n\n        <p class=\"text-center\">{{$t('common.user.kba.description')}}</p>\n\n        <fr-kba-form-group ref=\"kbaFormGroup\" :selfServiceDetails=\"selfServiceDetails\"></fr-kba-form-group>\n\n        <b-button v-if=\"!inline\" @click=\"save\" :block=\"true\" size=\"lg\" variant=\"primary\">{{$t(\"pages.selfservice.registration.completeRegistration\")}}</b-button>\n    </b-form>\n</template>\n\n<script>\nimport KBADefinitionFormGroup from '@/components/selfservice/common/KBADefinitionFormGroup';\nimport HorizontalRule from '@/components/utils/HorizontalRule';\n\n/**\n * @description Selfservice stage that handles the initial KBA during registration functions the same in allinone\n *\n **/\nexport default {\n    name: 'KBA-Security-Answer-Definition-Stage',\n    props: {\n        selfServiceDetails: { required: true },\n        inline: {\n            required: false,\n            default: false\n        }\n    },\n    components: {\n        'fr-horizontal-rule': HorizontalRule,\n        'fr-kba-form-group': KBADefinitionFormGroup\n    },\n    data () {\n        return {};\n    },\n    methods: {\n        getData () {\n            return this.$refs.kbaFormGroup.getData();\n        },\n\n        save () {\n            /* istanbul ignore next */\n            this.isValid().then((valid) => {\n                if (valid) {\n                    this.$emit('advanceStage', this.getData());\n                }\n            });\n        },\n        isValid () {\n            /* istanbul ignore next */\n            return this.$refs.kbaFormGroup.isValid();\n        }\n    }\n};\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./KBASecurityAnswerDefinitionStage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./KBASecurityAnswerDefinitionStage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./KBASecurityAnswerDefinitionStage.vue?vue&type=template&id=31b1a8ac&scoped=true&\"\nimport script from \"./KBASecurityAnswerDefinitionStage.vue?vue&type=script&lang=js&\"\nexport * from \"./KBASecurityAnswerDefinitionStage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"31b1a8ac\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.inline)?_c('div',[_c('small',{staticClass:\"form-text text-muted\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"pages.selfservice.registration.termsAndConditions.singlePage\"))+\" \"),_c('a',{directives:[{name:\"b-modal\",rawName:\"v-b-modal\",value:('termsModal'),expression:\"'termsModal'\"}],attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();}}},[_vm._v(_vm._s(_vm.$t(\"pages.selfservice.registration.termsAndConditions.title\")))]),_vm._v(\". \")]),_c('b-modal',{attrs:{\"id\":\"termsModal\",\"hide-footer\":\"\",\"title\":_vm.$t('pages.selfservice.registration.termsAndConditions.title')}},[_c('div',{staticClass:\"d-block text-center\"},[_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.selfServiceDetails.requirements.terms)}},[_vm._v(_vm._s(_vm.selfServiceDetails.requirements.terms))])])])],1):_c('div',[_c('h3',[_vm._v(_vm._s(_vm.$t(\"pages.selfservice.registration.termsAndConditions.title\")))]),_c('div',{staticClass:\"d-block text-center\"},[_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.selfServiceDetails.requirements.terms)}},[_vm._v(_vm._s(_vm.selfServiceDetails.requirements.terms))])]),(_vm.inline === false)?_c('b-button',{attrs:{\"block\":true,\"size\":\"lg\",\"variant\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\" \"+_vm._s(_vm.$t(\"common.form.agree\"))+\" \")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <div v-if=\"inline\">\n        <small class=\"form-text text-muted\">\n            {{$t(\"pages.selfservice.registration.termsAndConditions.singlePage\")}} <a href=\"#\" @click.prevent=\"\" v-b-modal=\"'termsModal'\">{{$t(\"pages.selfservice.registration.termsAndConditions.title\")}}</a>.\n        </small>\n\n        <b-modal id=\"termsModal\" hide-footer :title=\"$t('pages.selfservice.registration.termsAndConditions.title')\">\n            <div class=\"d-block text-center\">\n                <p v-html=\"selfServiceDetails.requirements.terms\">{{selfServiceDetails.requirements.terms}}</p>\n            </div>\n        </b-modal>\n    </div>\n    <div v-else>\n        <h3>{{$t(\"pages.selfservice.registration.termsAndConditions.title\")}}</h3>\n        <div class=\"d-block text-center\">\n            <p v-html=\"selfServiceDetails.requirements.terms\">{{selfServiceDetails.requirements.terms}}</p>\n        </div>\n\n        <b-button v-if=\"inline === false\" @click=\"save\" :block=\"true\" size=\"lg\" variant=\"primary\">\n            {{$t(\"common.form.agree\")}}\n        </b-button>\n    </div>\n</template>\n\n<script>\n/**\n * @description Selfservice stage for terms and conditions depending on all in one displays as a dialog or inline text depending at allinone\n *\n **/\nexport default {\n    name: 'Terms-And-Conditions',\n    props: {\n        selfServiceDetails: { required: true },\n        inline: {\n            required: false,\n            default: false\n        }\n    },\n    methods: {\n        getData () {\n            return {\n                accept: 'true'\n            };\n        },\n\n        save () {\n            this.$emit('advanceStage', this.getData());\n        },\n\n        isValid () {\n            return Promise.resolve(true);\n        }\n    }\n};\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TermsAndConditions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TermsAndConditions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TermsAndConditions.vue?vue&type=template&id=ec48583a&scoped=true&\"\nimport script from \"./TermsAndConditions.vue?vue&type=script&lang=js&\"\nexport * from \"./TermsAndConditions.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ec48583a\",\n  null\n  \n)\n\nexport default component.exports","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <div class=\"fr-all-in-one-container\">\n\n        <idmUserDetails v-if=\"stages.idmUserDetails\" :inline=\"true\" :selfServiceDetails=\"selfServiceDetails\"></idmUserDetails>\n        <kbaSecurityAnswerDefinitionStage v-if=\"stages.kbaSecurityAnswerDefinitionStage\" :inline=\"true\" :selfServiceDetails=\"selfServiceDetails\"></KBASecurityAnswerDefinitionStage>\n        <Captcha v-if=\"stages.captcha\" :self-service-details=\"selfServiceDetails\"></Captcha>\n\n        <template v-if=\"stages.consent && selfServiceDetails.requirements && selfServiceDetails.requirements.consent\">\n            <b-modal ref=\"consentModal\"\n                     :title=\"$t('pages.selfservice.registration.consent.title')\"\n                     @hide=\"loading = false;\">\n\n                <Consent :inline=\"true\" :selfServiceDetails=\"selfServiceDetails\"></Consent>\n\n                <b-form-checkbox plain v-model=\"consentCheck\"\n                                 :value=\"false\"\n                                 :unchecked-value=\"true\">\n                    {{$t(\"pages.selfservice.registration.consent.agreement\")}}\n                </b-form-checkbox>\n\n                <div slot=\"modal-footer\" class=\"w-100\">\n                    <b-btn :disabled=\"consentCheck\" size=\"sm\" class=\"float-right\" variant=\"primary\" @click=\"save\">\n                        {{$t(\"common.form.okay\")}}\n                    </b-btn>\n                </div>\n            </b-modal>\n        </template>\n\n        <fr-loading-button type=\"button\" variant=\"primary\" class=\"mt-2 mb-3 btn-lg btn-block\"\n                           :label=\"$t('common.form.signUp')\"\n                           :loading=\"loading\"\n                           :large=\"true\"\n                           @click=\"saveCheck\"></fr-loading-button>\n\n        <TermsAndConditions v-if=\"stages.termsAndConditions && selfServiceDetails.requirements && selfServiceDetails.requirements.terms\" :inline=\"true\" :selfServiceDetails=\"selfServiceDetails\"></TermsAndConditions>\n    </div>\n</template>\n\n<script>\nimport _ from 'lodash';\nimport Captcha from '../common/Captcha';\nimport Consent from './Consent';\nimport idmUserDetails from './UserDetails';\nimport kbaSecurityAnswerDefinitionStage from './KBASecurityAnswerDefinitionStage';\nimport LoadingButton from '@/components/utils/LoadingButton';\nimport TermsAndConditions from './TermsAndConditions';\n\n/**\n * @description Selfservice stage that is used for combing multiple selfservice stages (User details, Captcha, KBA, Terms and Confitions and Consent)\n *\n **/\nexport default {\n    name: 'All-In-One-Registration',\n    props: {\n        selfServiceDetails: { required: true }\n    },\n    components: {\n        idmUserDetails,\n        kbaSecurityAnswerDefinitionStage,\n        TermsAndConditions,\n        Consent,\n        Captcha,\n        'fr-loading-button': LoadingButton\n    },\n    data () {\n        let data = {\n            stages: {},\n            consentCheck: true,\n            loading: false\n        };\n\n        _.each(this.selfServiceDetails.requirements.stages, (name) => {\n            data.stages[name] = true;\n        });\n\n        return data;\n    },\n    methods: {\n        getData () {\n            let data = {};\n\n            /* istanbul ignore next */\n            _.each(this.$children, (child) => {\n                let childData = {};\n\n                if (child.getData) {\n                    childData = child.getData();\n                }\n\n                data = _.merge(data, childData);\n            });\n\n            if (this.selfServiceDetails.requirements.consentEnabled) {\n                data.consentGiven = 'true';\n            }\n\n            return data;\n        },\n\n        saveCheck () {\n            this.loading = true;\n\n            if (this.selfServiceDetails.requirements.consentEnabled) {\n                this.isValid().then(() => {\n                    this.$refs.consentModal.show();\n                });\n            } else {\n                /* istanbul ignore next */\n                this.isValid().then(() => {\n                    this.save();\n                });\n            }\n        },\n\n        save () {\n            this.$emit('advanceStage', this.getData());\n            this.loading = false;\n        },\n\n        isValid () {\n            let childChecks = [],\n                validPromise = new Promise((resolve, reject) => {\n                    if (this.$children) {\n                        _.each(this.$children, (child, index) => {\n                            /* istanbul ignore next */\n                            if (this.$children[index].isValid) {\n                                childChecks.push(this.$children[index].isValid());\n                            }\n                        });\n                    }\n\n                    Promise.all(childChecks).then((results) => {\n                        let validCheck = true;\n\n                        _.each(results, (check) => {\n                            /* istanbul ignore next */\n                            if (check === false) {\n                                validCheck = false;\n                            }\n                        });\n\n                        if (validCheck) {\n                            resolve({ 'success': true });\n                        } else {\n                            this.displayNotification('error', this.$t('pages.selfservice.registration.pleaseComplete'));\n                            this.loading = false;\n                        }\n                    });\n                });\n\n            return validPromise;\n        }\n    }\n};\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllInOneRegistration.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllInOneRegistration.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AllInOneRegistration.vue?vue&type=template&id=d4ee1516&scoped=true&\"\nimport script from \"./AllInOneRegistration.vue?vue&type=script&lang=js&\"\nexport * from \"./AllInOneRegistration.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d4ee1516\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-alert',{attrs:{\"show\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$t('pages.selfservice.registration.emailValidation'))+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <b-alert show>\n        {{$t('pages.selfservice.registration.emailValidation')}}\n    </b-alert>\n</template>\n\n<script>\n/**\n * @description Stage for handling email validation\n *\n **/\nexport default {\n    name: 'Email-Validation'\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailValidation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailValidation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EmailValidation.vue?vue&type=template&id=154a567a&\"\nimport script from \"./EmailValidation.vue?vue&type=script&lang=js&\"\nexport * from \"./EmailValidation.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <div class=\"h-100\">\n        <b-container fluid class=\"h-100 px-0\" v-show=\"!showSelfService\">\n            <div class=\"h-100 d-flex\">\n                <div class=\"m-auto fr-center-card\">\n                    <bounce-loader :color=\"loadingColor\"></bounce-loader>\n                </div>\n            </div>\n        </b-container>\n\n        <div v-show=\"showSelfService\">\n            <fr-center-card :showLogo=\"true\" v-if=\"selfServiceType !== 'localAutoLogin'\">\n                <div slot=\"center-card-header\">\n                    <h2 v-show=\"title.length > 0\" class=\"h2\">{{title}}</h2>\n                    <p v-show=\"subtitle.length > 0\" class='text-center mb-0'>{{subtitle}}</p>\n                </div>\n\n                <b-card-body slot=\"center-card-body\">\n                    <component ref=\"selfServiceStage\" v-show=\"showSelfService\"\n                               :is=\"selfServiceType\"\n                               :selfServiceDetails=\"selfServiceDetails\"\n                               @advanceStage=\"advanceStage\">\n                    </component>\n                </b-card-body>\n\n                <b-card-footer slot=\"center-card-footer\">\n                    {{$t('pages.selfservice.registration.haveAccount')}}\n                    <router-link action=\"\" :to=\"{name: 'Login'}\">{{$t('pages.selfservice.registration.signIn')}}</router-link>\n                </b-card-footer>\n            </fr-center-card>\n        </div>\n    </div>\n</template>\n\n<script>\nimport _ from 'lodash';\nimport { BounceLoader } from 'vue-spinner/dist/vue-spinner.min.js';\nimport styles from '@/scss/main.scss';\nimport CenterCard from '@/components/utils/CenterCard';\nimport AllInOneRegistration from '@/components/selfservice/registration/AllInOneRegistration';\nimport Captcha from '@/components/selfservice/common/Captcha';\nimport Consent from '@/components/selfservice/registration/Consent';\nimport emailValidation from '@/components/selfservice/registration/EmailValidation';\nimport GenericSelfService from '@/components/selfservice/common/GenericSelfService';\nimport idmUserDetails from '@/components/selfservice/registration/UserDetails';\nimport kbaSecurityAnswerDefinitionStage from '@/components/selfservice/registration/KBASecurityAnswerDefinitionStage.vue';\nimport SelfserviceAPI from '@/components/selfservice/mixins/SelfserviceAPIMixin';\nimport TermsAndConditions from '@/components/selfservice/registration/TermsAndConditions';\n\nconst customTitleComponents = [\n    'captcha',\n    'consent',\n    'emailValidation',\n    'kbaSecurityAnswerDefinitionStage',\n    'termsAndConditions'\n];\n\n/**\n * @description Selfservice controlling component for registering a resource (e.g. a new user). Makes use of selfservice-registration.json config file.\n *\n * @mixin - selfservice/mixins/SelfserviceAPIMixin.vue\n *\n * @fires POST authentication?_action=login - Uses localAutoLogin stage that sets a JWT after a successful registration to start a user session.\n * Alternatively if registration came through social, login will use the data store token to go forward with login after a successful registration.\n * @fires POST authentication?_action=logout - Ends current user session\n */\nexport default {\n    name: 'Registration',\n    components: {\n        'fr-center-card': CenterCard,\n        AllInOneRegistration,\n        BounceLoader,\n        Captcha,\n        Consent,\n        emailValidation,\n        idmUserDetails,\n        kbaSecurityAnswerDefinitionStage,\n        TermsAndConditions,\n        GenericSelfService\n    },\n    props: ['clientToken'],\n    mixins: [\n        SelfserviceAPI\n    ],\n    data () {\n        return {\n            selfServiceType: null,\n            selfServiceDetails: null,\n            loadingColor: styles.baseColor,\n            showSelfService: false,\n            apiType: 'registration',\n            clientTokenUsed: false\n        };\n    },\n    computed: {\n        title () {\n            if (_.includes(customTitleComponents, this.selfServiceType)) {\n                return this.$t(`pages.selfservice.registration.stageTitle.${this.selfServiceType}`);\n            } else {\n                return this.$t('pages.selfservice.registration.signUp');\n            }\n        },\n        subtitle () {\n            if (_.includes(customTitleComponents, this.selfServiceType)) {\n                return this.$t(`pages.selfservice.registration.stageSubtitle.${this.selfServiceType}`);\n            } else {\n                return this.$t('pages.selfservice.registration.signUpMsg');\n            }\n        }\n    },\n    mounted () {\n        if (this.$route.params.queryParams) {\n            /* istanbul ignore next */\n            // queryParams come from the link emailed to the user for the emailValidation stage\n            // This stops the flicker by hiding everything in the center-card\n            this.selfServiceType = 'localAutoLogin';\n            this.advanceStage(this.parseQueryParams(this.$route.params.queryParams));\n        } else {\n            this.loadData();\n        }\n    },\n    methods: {\n        setChildComponent (type, details) {\n            this.selfServiceDetails = details;\n\n            if (type === 'parameters') {\n                this.selfServiceType = null;\n                this.showSelfService = false;\n\n                this.advanceStage({\n                    'input': {}\n                });\n            } else if (this.clientToken && !this.clientTokenUsed) {\n                this.advanceStage({\n                    'clientToken': this.clientToken,\n                    'oauthRegister': 'true'\n                });\n                this.clientTokenUsed = true;\n            } else if (details.type === 'localAutoLogin') {\n                if (_.has(details, 'additions.oauthLogin') && details.additions.oauthLogin) {\n                    /* istanbul ignore next */\n                    const socialLoginInstance = this.getRequestService({\n                        headers: {\n                            'X-OpenIDM-NoSession': 'false',\n                            'X-OpenIDM-OAuth-Login': 'true',\n                            'X-OpenIDM-DataStoreToken': this.clientToken,\n                            'X-Requested-With': 'XMLHttpRequest'\n                        }\n                    });\n\n                    /* istanbul ignore next */\n                    socialLoginInstance.post('/authentication?_action=login')\n                        .then((userDetails) => {\n                            this.displayNotification('success', this.$t('pages.selfservice.registration.createdAccount'));\n\n                            if (details.additions.successUrl && details.additions.successUrl.length > 0) {\n                                window.location = details.additions.successUrl;\n                            } else {\n                                this.progressiveProfileCheck(userDetails, () => {\n                                    window.history.pushState('', '', window.location.pathname);\n                                    this.$router.push('/');\n                                });\n                            }\n                        })\n                        .catch(() => {\n                            window.history.pushState('', '', window.location.pathname);\n                            this.$router.push('/login');\n                        });\n                } else {\n                    this.autoLogin(details.additions.credentialJwt, details.additions.successUrl);\n                }\n            } else {\n                let stageCheck = false;\n\n                _.each(this.$options.components, (value, key) => {\n                    if (_.toLower(key) === _.toLower(type)) {\n                        stageCheck = true;\n                    }\n                });\n\n                if (stageCheck) {\n                    this.selfServiceType = type;\n                } else {\n                    this.selfServiceType = 'GenericSelfService';\n                }\n\n                this.showSelfService = true;\n            }\n        },\n        apiErrorCallback (error) {\n            let errorMessage = this.findPolicyError(error.response);\n\n            this.showSelfService = true;\n\n            /* istanbul ignore next */\n            this.displayNotification('error', errorMessage);\n\n            // TODO Readd this if it is problematic not resetting all of registration on failure\n            // clean up any queryParams from the url\n            // this.$router.push('/registration');\n\n            // reload the form\n            // this.loadData();\n        },\n        findPolicyError (errorResponse) {\n            let errorMessage = errorResponse.data.message,\n                policyError = '';\n\n            if (_.has(errorResponse, 'data.detail.failedPolicyRequirements')) {\n                let policy = errorResponse.data.detail.failedPolicyRequirements[0];\n\n                if (policy.policyRequirements.length > 0) {\n                    policyError = this.$t(`common.policyValidationMessages.${policy.policyRequirements[0].policyRequirement}`, policy.policyRequirements[0].params);\n\n                    errorMessage = `${this.$t(`common.policyValidationMessages.policyValidationFailed`, { property: policy.property })}: ${policyError}`;\n                }\n            }\n\n            return errorMessage;\n        },\n        autoLogin: function (jwt, successUrl) {\n            /* istanbul ignore next */\n            var loginServiceInstance = this.getRequestService({\n                    headers: {\n                        'X-OpenIDM-Jwt': jwt,\n                        'X-OpenIDM-NoSession': false,\n                        'X-OpenIDM-Password': null,\n                        'X-OpenIDM-Username': null\n                    }\n                }),\n                idmInstance = this.getRequestService({\n                    headers: this.getAnonymousHeaders()\n                });\n\n            /* istanbul ignore next */\n            idmInstance.post('/authentication?_action=logout').then(() => {\n                loginServiceInstance.post('/authentication?_action=login').then((userDetails) => {\n                    this.displayNotification('success', this.$t('pages.selfservice.registration.createdAccount'));\n\n                    if (successUrl && successUrl.length > 0) {\n                        window.location = successUrl;\n                    } else {\n                        // Check for progressive profiling.\n                        this.progressiveProfileCheck(userDetails, () => {\n                            this.$router.push('/');\n                        });\n                    }\n                })\n                    .catch((error) => {\n                        /* istanbul ignore next */\n                        this.displayNotification('error', error.response.data.message);\n                    });\n            });\n        }\n    }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=dda62210&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form-group',{staticClass:\"mb-0\"},[_vm._t(\"input\",[_c('fr-floating-label-input',{attrs:{\"name\":\"password\",\"fieldName\":\"password\",\"type\":\"password\",\"label\":_vm.label || _vm.$t('common.placeholders.password'),\"reveal\":true,\"showErrorState\":false},on:{\"input\":function($event){return _vm.setFailingPolicies($event)}},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})]),_vm._t(\"policy-panel\",[_c('fr-policy-panel',{staticClass:\"mt-2\",attrs:{\"num-columns\":_vm.cols,\"policies\":_vm.policies,\"policy-failures\":_vm.failedPolicies}})])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-row',_vm._l((_vm.numColumns),function(i){return _c('b-col',{key:(\"password_policy_\" + i)},[_c('small',[_c('ul',{staticClass:\"pl-4 text-left\"},_vm._l((_vm.policyColumns[i-1]),function(policy){return _c('li',{key:policy.policyId,class:[{'fr-valid': !_vm.includes(_vm.policyFailures, policy.name)}, 'text-muted fr-policy-list-item']},[_vm._v(\" \"+_vm._s(_vm.$t((\"common.policyValidationMessages.\" + (policy.name)), policy.params))+\" \")])}),0)])])}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n  <b-row>\n    <b-col\n      v-for=\"i in numColumns\"\n      :key=\"`password_policy_${i}`\">\n      <small>\n        <ul class=\"pl-4 text-left\">\n          <li\n            v-for=\"(policy) in policyColumns[i-1]\"\n            :key=\"policy.policyId\"\n            :class=\"[{'fr-valid': !includes(policyFailures, policy.name)}, 'text-muted fr-policy-list-item']\">\n            {{ $t(`common.policyValidationMessages.${policy.name}`, policy.params) }}\n          </li>\n        </ul>\n      </small>\n    </b-col>\n  </b-row>\n</template>\n\n<script>\nimport {\n    includes\n} from 'lodash';\n\n/**\n * @description Part of the password policy component that displays the list of policy items required.\n * Shows failed policies in a normal text and passing policies in a light text.\n * */\nexport default {\n    name: 'PolicyPanel',\n    props: {\n    /**\n     * Number of columns to display. Policies are evenly distributed between columns.\n     */\n        numColumns: {\n            type: Number,\n            default: 1\n        },\n        /**\n     * Array of policy objects [{ name: POLICYNAME, params: { PARAMNAME: VALUE } }, ...]\n     */\n        policies: {\n            type: Array,\n            default: () => []\n        },\n        /**\n     * Array of failing policies. Must match a value for name in policies array. ['FAILED1', 'FAILED2', ...]\n     */\n        policyFailures: {\n            type: Array,\n            default: () => []\n        }\n    },\n    data () {\n        return {\n            policyColumns: []\n        };\n    },\n    computed: {\n        numPolicies () {\n            return this.policies.length;\n        }\n    },\n    methods: {\n        includes,\n        /**\n     * Given an array of policies and a number of columns, distribute policies evenly.\n     * @param {Object[]} policyList policies to be split\n     * @param {Number} numColumns number of columns to split into\n     * @return {Object[][]} Array of arrays indicating the policies in each column\n     */\n        getPolicyColumns (policyList, numColumns) {\n            const policyColumns = [],\n                numPolicies = policyList.length,\n                policiesPerColumn = Math.floor(numPolicies / numColumns),\n                remaining = (numPolicies % numColumns);\n            let curColumnIndex = 0;\n\n            // Split policies between columns\n            policyList.forEach((policy) => {\n                if (typeof policyColumns[curColumnIndex] === 'undefined') {\n                    policyColumns.push([]);\n                }\n                policyColumns[curColumnIndex].push({ name: policy.name, params: policy.params });\n                const limit = curColumnIndex < remaining ? (policiesPerColumn + 1) : policiesPerColumn;\n                if (policyColumns[curColumnIndex].length >= limit) {\n                    curColumnIndex += 1;\n                }\n            });\n            return policyColumns;\n        }\n    },\n    watch: {\n        policies: {\n            handler (value) {\n                this.policyColumns = this.getPolicyColumns(value, this.numColumns);\n            },\n            immediate: true\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.fr-valid {\n  opacity: 0.5;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolicyPanel.vue?vue&type=template&id=48905e4d&scoped=true&\"\nimport script from \"./PolicyPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./PolicyPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PolicyPanel.vue?vue&type=style&index=0&id=48905e4d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"48905e4d\",\n  null\n  \n)\n\nexport default component.exports","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n  <b-form-group class=\"mb-0\">\n    <slot name=\"input\">\n        <fr-floating-label-input\n            name=\"password\"\n            fieldName=\"password\"\n            type=\"password\"\n            v-model=\"password\"\n            :label=\"label || $t('common.placeholders.password')\"\n            :reveal=\"true\"\n            :showErrorState=\"false\"\n            @input=\"setFailingPolicies($event)\" />\n    </slot>\n    <slot name=\"policy-panel\">\n      <fr-policy-panel\n        class=\"mt-2\"\n        :num-columns=\"cols\"\n        :policies=\"policies\"\n        :policy-failures=\"failedPolicies\" />\n    </slot>\n  </b-form-group>\n</template>\n\n<script>\nimport {\n    at,\n    curry,\n    first,\n    flatten,\n    head,\n    includes,\n    isEmpty,\n    isObject,\n    isString,\n    isUndefined,\n    reject,\n    debounce\n} from 'lodash';\nimport FloatingLabelInput from './FloatingLabelInput';\nimport PolicyPanel from './PolicyPanel';\n\n/**\n * The main display for the password policy component. Connects a text field to check policy on input to see if password correctly matches configured policy (makes use of policy.json)\n *\n * @fires POST /policy/selfservice/registration/?_action=validateObject - Submits an object in its current state to policy for validation against the configured policy\n */\nexport default {\n    name: 'PolicyPasswordInput',\n    components: {\n        'fr-floating-label-input': FloatingLabelInput,\n        'fr-policy-panel': PolicyPanel\n    },\n    props: {\n        /**\n         * Items to remove from the policy service.\n         */\n        excludeOverwrite: {\n            required: false,\n            type: Array,\n            default: null\n        },\n        cols: {\n            type: Number,\n            default: 2\n        },\n        /**\n         * Failed policies not shown in policy panel\n         */\n        failed: {\n            type: Array,\n            default: () => []\n        },\n        userPolicyObject: {\n            type: Boolean,\n            default: false\n        },\n        /**\n         * Floating label for input\n         */\n        label: {\n            type: String,\n            default () {\n                return this.$t('common.placeholders.password');\n            }\n        },\n        /**\n         * Required policy API used to validate input password.\n         */\n        policyApi: {\n            required: true,\n            type: String\n        },\n        value: {\n            type: [String, Object],\n            default () {\n                return '';\n            }\n        }\n    },\n    data () {\n        return {\n            failedPolicies: [],\n            password: this.value,\n            policies: [],\n            policyService: () => {},\n            serverFailures: []\n        };\n    },\n    watch: {\n        failed: {\n            handler (newVal) {\n                this.serverFailures = this.getFailedPolicyMessages(newVal);\n            },\n            deep: true,\n            immediate: true\n        },\n        failedPolicies (newVal) {\n            this.$emit('valid', newVal.length === 0);\n        },\n        password (newVal) {\n            this.$emit('input', newVal);\n        },\n        value () {\n            this.password = this.value;\n        }\n    },\n    computed: {\n        exclude () {\n            if (this.excludeOverwrite) {\n                return this.excludeOverwrite;\n            }\n            return [\n                {\n                    name: 'REQUIRED',\n                    predicate (policyRequirements) {\n                        return includes(policyRequirements, 'REQUIRED') && includes(policyRequirements, 'MIN_LENGTH');\n                    }\n                },\n                {\n                    name: 'IS_NEW',\n                    predicate () {\n                        return this.policyApi === 'selfservice/registration';\n                    }\n                },\n                'VALID_TYPE',\n                'CANNOT_CONTAIN_OTHERS'\n            ];\n        }\n    },\n    methods: {\n        /**\n         * Predicates whether item matches 'password'. Policy Definition and Policy Failure objects\n         * have different shapes, so this function can be used as a predicate for both.\n         * @param {String} propName - The name of the property grab\n         * @param {Object} policyRequirementItem - object to predicate on\n         * @return {Boolean}\n         */\n        isPasswordPolicyItem: curry((propName, policyRequirementItem) => !isEmpty(policyRequirementItem[propName].match('password'))),\n\n        /**\n         * convert policy definition into a simple structure to work with\n         * @param {Object} policyDefinition\n         * @param {String[]} policyDefinition.policyRequirements - singleton array with policy name\n         * @param {Object} policyDefinition.params - object containing params for policy (e.g. `{ params: { numNum: 1 } }\n         * @return {Object} - {name<String>, params<Object>}\n         */\n        toSimplePolicyObject (policyDefinition) {\n            const { policyRequirements, params } = policyDefinition,\n                name = first(policyRequirements);\n\n            return !isUndefined(name) ? { name, params } : {};\n        },\n        /**\n         * Change an array of Failed Policy objects to an array of policy names\n         * @param {Object} failedPolicySet - policy service response object\n         * @param {Object[]} failedPolicySet.failedPolicyRequirements - the list to map\n         * @return {String[]}\n         */\n        toPolicyNames (failedPolicySet) {\n            const failedPolicyRequirements = failedPolicySet.failedPolicyRequirements || [],\n                policyNames = failedPolicyRequirements\n                    .filter(this.isPasswordPolicyItem('property'))\n                    .map((failedPolicyDefinition) => at(failedPolicyDefinition, ['policyRequirements[0].policyRequirement']));\n\n            return flatten(policyNames);\n        },\n        /**\n         * Remove from the policy service return set of policies those that are defined in the `exclude` prop\n         * @param {Object} policyRequirementSet - policy service response object\n         * @param {String[]} policy names and predicates to exclude\n         * @return {Object} - edited version of the policyRequirementSet\n         */\n        makeExclusions (policyRequirementSet, exclude) {\n            const policyRequirements = (policyRequirementSet && policyRequirementSet.policyRequirements) ? policyRequirementSet.policyRequirements : [];\n            let policies = (policyRequirementSet && policyRequirementSet.policies) ? policyRequirementSet.policies : [];\n\n            // eslint-disable-next-line one-var\n            const rejectPolicy = (requirement) => reject(policies, (policy) => first(policy.policyRequirements) === requirement);\n\n            exclude.forEach((exclusion) => {\n                if (isObject(exclusion)) {\n                    if (exclusion.predicate(policyRequirements)) {\n                        policies = rejectPolicy(exclusion.name);\n                    }\n                } else if (isString(exclusion)) {\n                    if (includes(policyRequirements, exclusion)) {\n                        policies = rejectPolicy(exclusion);\n                    }\n                }\n            });\n\n            return Object.assign({}, policyRequirementSet, { policyRequirements, policies });\n        },\n        /**\n         * Get an array of error message strings given an array of failing policy objects.\n         * These are used to display the failing policies that are returned after submitting a password.\n         * @param {Object[]} failed Array of failing policy objects\n         * @return {String[]} Array of translated error messages\n         */\n        getFailedPolicyMessages (failed) {\n            if (failed.length === 0) {\n                return [];\n            }\n            return this.failed.map((policy) => {\n                const name = policy.policyRequirements[0].policyRequirement,\n                    param = policy.policyRequirements[0].params;\n                return this.$t(`common.policyValidationMessages.${name}`, param);\n            });\n        },\n        /**\n         * validates a value for as-you-type feedback.\n         * @param {String} password a string to validate against relevant policy\n         */\n        setFailingPolicies: debounce(function (password) {\n            let sentPassword = { password };\n\n            if (this.policyApi.match('registration')) {\n                sentPassword = { user: { password: this.password } };\n            }\n\n            this.policyService.post(`/policy/${this.policyApi}/?_action=validateObject`, sentPassword)\n                .then(({ data }) => { this.failedPolicies = this.toPolicyNames(data); this.serverFailures = []; })\n                .catch(() => {\n                    this.displayNotification('IDMMessages', 'error', this.$t('common.policyValidationMessages.policyServiceError.policyApi', { policyApi: this.policyApi }));\n                });\n        }, 200)\n    },\n    created () {\n    // Initialize the policy service to be used in validation calls and the preliminary get call.\n        const headers = this.getAnonymousHeaders();\n        this.policyService = this.getRequestService({ headers });\n\n        // Get the initial policy list from the policy service.\n        this.policyService.get(`/policy/${this.policyApi}`)\n            .then(({ data }) => head(data.properties.filter(this.isPasswordPolicyItem('name'))))\n            .then((policyRequirementSet) => this.makeExclusions(policyRequirementSet, this.exclude))\n            .then(({ policies }) => {\n                this.policies = policies\n                    .map(this.toSimplePolicyObject)\n                    .filter((p) => !isEmpty(p));\n            })\n            .catch(() => {\n                this.displayNotification('IDMMessages', 'error', this.$t('common.policyValidationMessages.policyServiceError.policyApi', { policyApi: this.policyApi }));\n                this.$router.push('/login');\n            });\n\n        this.setFailingPolicies(this.password);\n    }\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPasswordInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPasswordInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolicyPasswordInput.vue?vue&type=template&id=4c9cb7d0&\"\nimport script from \"./PolicyPasswordInput.vue?vue&type=script&lang=js&\"\nexport * from \"./PolicyPasswordInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SocialButtons.vue?vue&type=style&index=0&id=0852992a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SocialButtons.vue?vue&type=style&index=0&id=0852992a&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPanel.vue?vue&type=style&index=0&id=48905e4d&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPanel.vue?vue&type=style&index=0&id=48905e4d&lang=scss&scoped=true&\""],"sourceRoot":""}